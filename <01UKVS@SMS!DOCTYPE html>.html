<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üß† –ù–µ–π—Ä–æ–∫–≤–∞–Ω—Ç–æ–≤–∞—è –°–µ—Ç—å v6.0</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --quantum-blue: #00ffff;
            --quantum-purple: #9d00ff;
            --quantum-gold: #ffd700;
            --quantum-dark: #0f0c29;
            --quantum-pink: #ff00aa;
            --quantum-green: #00ffaa;
            --quantum-neural: #ff6e00;
            --quantum-matrix: #00ff6e;
            --quantum-deep: #6e00ff;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, var(--quantum-dark), #1a1039);
            color: white;
            margin: 0;
            padding: 0;
            height: 100vh;
            overflow: hidden;
            -webkit-tap-highlight-color: transparent;
        }
        
        #quantum-canvas {
            position: fixed;
            top: 0;
            left: 0;
            z-index: -1;
            width: 100%;
            height: 100%;
            opacity: 0.7;
        }
        
        .app-container {
            display: grid;
            grid-template-columns: 300px 1fr;
            height: 100vh;
            transition: all 0.3s;
        }
        
        @media (max-width: 768px) {
            .app-container {
                grid-template-columns: 1fr;
            }
            
            .nav-panel {
                display: none;
                position: fixed;
                width: 80%;
                height: 100%;
                z-index: 1000;
            }
            
            .nav-panel.active {
                display: block;
            }
            
            .mobile-menu-btn {
                display: block !important;
                position: fixed;
                top: 10px;
                left: 10px;
                z-index: 1001;
                background: rgba(15, 12, 41, 0.9);
                border: 1px solid var(--quantum-blue);
                border-radius: 50%;
                width: 40px;
                height: 40px;
                display: flex;
                align-items: center;
                justify-content: center;
                cursor: pointer;
            }
        }
        
        .mobile-menu-btn {
            display: none;
        }
        
        /* –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å */
        .nav-panel {
            background: rgba(15, 12, 41, 0.95);
            border-right: 1px solid var(--quantum-blue);
            padding: 20px;
            overflow-y: auto;
            backdrop-filter: blur(5px);
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        }
        
        .nav-header {
            font-size: 1.5em;
            color: var(--quantum-neural);
            margin-bottom: 20px;
            text-align: center;
            text-shadow: 0 0 10px var(--quantum-neural);
            position: relative;
            padding-bottom: 10px;
        }
        
        .nav-header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 25%;
            width: 50%;
            height: 2px;
            background: linear-gradient(to right, transparent, var(--quantum-neural), transparent);
        }
        
        .quantum-node {
            background: rgba(0, 30, 60, 0.7);
            border: 1px solid var(--quantum-blue);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .quantum-node::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                to bottom right,
                transparent,
                transparent,
                transparent,
                var(--quantum-blue),
                transparent
            );
            transform: rotate(30deg);
            opacity: 0;
            transition: all 0.5s;
        }
        
        .quantum-node:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 255, 255, 0.3);
            border-color: var(--quantum-neural);
        }
        
        .quantum-node:hover::before {
            opacity: 0.3;
            animation: shine 1.5s infinite;
        }
        
        @keyframes shine {
            0% { transform: rotate(30deg) translate(-10%, -10%); }
            100% { transform: rotate(30deg) translate(10%, 10%); }
        }
        
        .node-title {
            color: var(--quantum-gold);
            margin-bottom: 10px;
            font-weight: bold;
            display: flex;
            align-items: center;
        }
        
        .node-title::before {
            content: 'üß†';
            margin-right: 8px;
            font-size: 0.9em;
        }
        
        .node-status {
            font-size: 0.8em;
            color: var(--quantum-blue);
            display: flex;
            justify-content: space-between;
        }
        
        /* –û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ */
        .content-area {
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }
        
        .tab-container {
            display: flex;
            background: linear-gradient(to right, rgba(0, 20, 40, 0.9), rgba(9, 0, 40, 0.9));
            border-bottom: 1px solid var(--quantum-blue);
            overflow-x: auto;
            scrollbar-width: thin;
        }
        
        .tab-container::-webkit-scrollbar {
            height: 5px;
        }
        
        .tab-container::-webkit-scrollbar-thumb {
            background: var(--quantum-blue);
            border-radius: 5px;
        }
        
        .tab {
            padding: 15px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
            white-space: nowrap;
            position: relative;
        }
        
        .tab::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 50%;
            width: 0;
            height: 2px;
            background: var(--quantum-neural);
            transition: all 0.3s;
        }
        
        .tab:hover {
            color: var(--quantum-neural);
        }
        
        .tab:hover::after {
            width: 80%;
            left: 10%;
        }
        
        .tab.active {
            color: var(--quantum-neural);
            font-weight: bold;
        }
        
        .tab.active::after {
            width: 80%;
            left: 10%;
            background: var(--quantum-neural);
        }
        
        .tab-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: none;
            background: rgba(5, 5, 30, 0.4);
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* –ö–≤–∞–Ω—Ç–æ–≤—ã–π –≤–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä */
        .quantum-visualizer {
            width: 100%;
            height: 300px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
            border: 1px solid var(--quantum-purple);
            box-shadow: 0 0 20px rgba(157, 0, 255, 0.2);
        }
        
        /* –§–æ—Ä–º—ã –∏ –∫–Ω–æ–ø–∫–∏ */
        .quantum-form {
            background: linear-gradient(to bottom right, rgba(0, 0, 30, 0.7), rgba(20, 0, 50, 0.7));
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 1px solid var(--quantum-purple);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.3s;
        }
        
        .quantum-form:hover {
            box-shadow: 0 5px 25px rgba(157, 0, 255, 0.4);
            transform: translateY(-2px);
        }
        
        .form-title {
            color: var(--quantum-neural);
            margin-bottom: 15px;
            font-size: 1.2em;
            text-shadow: 0 0 5px var(--quantum-neural);
            display: flex;
            align-items: center;
        }
        
        .form-title::before {
            content: 'üåÄ';
            margin-right: 10px;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px;
            margin-bottom: 15px;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid var(--quantum-blue);
            border-radius: 5px;
            color: white;
            transition: all 0.3s;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--quantum-neural);
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
        }
        
        button {
            background: linear-gradient(to right, var(--quantum-purple), var(--quantum-blue));
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        button::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                to bottom right,
                transparent,
                rgba(255, 255, 255, 0.2),
                transparent
            );
            transform: rotate(30deg);
            transition: all 0.5s;
            opacity: 0;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(157, 0, 255, 0.5);
        }
        
        button:hover::after {
            opacity: 1;
            animation: shine 1.5s infinite;
        }
        
        .secondary-btn {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--quantum-blue);
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes pulse {
            0% { opacity: 0.5; }
            50% { opacity: 1; }
            100% { opacity: 0.5; }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-5px); }
            100% { transform: translateY(0px); }
        }
        
        .float {
            animation: float 3s ease-in-out infinite;
        }
        
        /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 100;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            background: linear-gradient(to bottom right, var(--quantum-dark), #1a1039);
            padding: 30px;
            border-radius: 10px;
            border: 1px solid var(--quantum-blue);
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.3);
            position: relative;
        }
        
        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            background: transparent;
            border: none;
            color: var(--quantum-blue);
            font-size: 1.5em;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .close-modal:hover {
            color: var(--quantum-neural);
            transform: rotate(90deg);
        }
        
        /* –ù–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã */
        .quantum-coin {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(to right, rgba(0, 20, 40, 0.9), rgba(9, 0, 40, 0.9));
            border: 1px solid var(--quantum-gold);
            border-radius: 10px;
            padding: 10px 15px;
            z-index: 1000;
            display: flex;
            align-items: center;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
            transition: all 0.3s;
        }
        
        .quantum-coin:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }
        
        .coin-icon {
            color: var(--quantum-gold);
            font-size: 1.2em;
            margin-right: 10px;
        }
        
        .dynamic-window {
            position: absolute;
            background: linear-gradient(to bottom right, rgba(15, 12, 41, 0.95), rgba(25, 10, 60, 0.95));
            border: 1px solid var(--quantum-purple);
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(157, 0, 255, 0.5);
            min-width: 300px;
            min-height: 200px;
            z-index: 100;
            resize: both;
            overflow: auto;
            backdrop-filter: blur(5px);
            transition: all 0.3s;
        }
        
        .dynamic-window:hover {
            box-shadow: 0 0 30px rgba(157, 0, 255, 0.7);
        }
        
        .window-header {
            background: linear-gradient(to right, rgba(0, 0, 30, 0.7), rgba(20, 0, 50, 0.7));
            padding: 10px;
            border-bottom: 1px solid var(--quantum-blue);
            cursor: move;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: bold;
            color: var(--quantum-neural);
        }
        
        .close-window {
            background: transparent;
            border: none;
            color: var(--quantum-pink);
            cursor: pointer;
            font-size: 1.2em;
            transition: all 0.3s;
        }
        
        .close-window:hover {
            transform: scale(1.2);
            color: var(--quantum-neural);
        }
        
        .evolution-notification {
            position: fixed;
            bottom: 80px;
            right: 20px;
            background: linear-gradient(to right, rgba(0, 30, 60, 0.9), rgba(20, 0, 70, 0.9));
            border: 1px solid var(--quantum-blue);
            border-radius: 10px;
            padding: 15px;
            max-width: 300px;
            z-index: 1000;
            animation: pulse 2s infinite;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.3);
        }
        
        .ai-response {
            color: var(--quantum-green);
            margin: 10px 0;
            padding: 10px;
            background: rgba(0, 0, 30, 0.3);
            border-radius: 5px;
            border-left: 3px solid var(--quantum-green);
        }
        
        .quantum-market-item {
            padding: 10px;
            margin: 5px 0;
            background: linear-gradient(to right, rgba(0, 0, 30, 0.5), rgba(20, 0, 50, 0.5));
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid transparent;
        }
        
        .quantum-market-item:hover {
            background: linear-gradient(to right, rgba(0, 0, 30, 0.8), rgba(20, 0, 50, 0.8));
            border-color: var(--quantum-neural);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 255, 255, 0.2);
        }
        
        .quantum-progress {
            width: 100%;
            height: 10px;
            background: var(--quantum-dark);
            border-radius: 5px;
            margin: 10px 0;
            overflow: hidden;
            border: 1px solid rgba(0, 255, 255, 0.2);
        }
        
        .quantum-progress-bar {
            height: 100%;
            background: linear-gradient(to right, var(--quantum-purple), var(--quantum-blue));
            border-radius: 5px;
            transition: width 0.5s;
            position: relative;
            overflow: hidden;
        }
        
        .quantum-progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(
                90deg,
                rgba(255, 255, 255, 0) 0%,
                rgba(255, 255, 255, 0.3) 50%,
                rgba(255, 255, 255, 0) 100%
            );
            animation: progressShine 2s infinite;
        }
        
        @keyframes progressShine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .user-register-form {
            background: linear-gradient(to right, rgba(0, 0, 30, 0.7), rgba(20, 0, 50, 0.7));
            padding: 20px;
            border-radius: 10px;
            margin: 20px auto;
            max-width: 400px;
            border: 1px solid var(--quantum-blue);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .transaction-history {
            max-height: 200px;
            overflow-y: auto;
            margin-top: 10px;
            border: 1px solid var(--quantum-blue);
            border-radius: 5px;
            padding: 10px;
            background: rgba(0, 0, 30, 0.3);
        }
        
        .transaction-item {
            padding: 10px;
            margin: 5px 0;
            background: linear-gradient(to right, rgba(0, 0, 30, 0.3), rgba(20, 0, 50, 0.3));
            border-radius: 5px;
            font-size: 0.9em;
            transition: all 0.3s;
        }
        
        .transaction-item:hover {
            background: linear-gradient(to right, rgba(0, 0, 30, 0.5), rgba(20, 0, 50, 0.5));
            transform: translateX(5px);
        }
        
        .matrix-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }
        
        .matrix-cell {
            background: linear-gradient(to bottom right, rgba(0, 0, 30, 0.5), rgba(20, 0, 50, 0.5));
            border: 1px solid var(--quantum-blue);
            border-radius: 5px;
            padding: 10px;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .matrix-cell:hover {
            background: linear-gradient(to bottom right, rgba(0, 0, 30, 0.8), rgba(20, 0, 50, 0.8));
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.3);
            border-color: var(--quantum-neural);
        }
        
        /* –ù–µ–π—Ä–æ–∫–≤–∞–Ω—Ç–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã */
        .neural-connection {
            position: relative;
            height: 100px;
            margin: 20px 0;
        }
        
        .neural-line {
            position: absolute;
            height: 2px;
            background: linear-gradient(to right, var(--quantum-purple), var(--quantum-blue));
            transform-origin: left center;
            animation: neuralPulse 2s infinite alternate;
        }
        
        @keyframes neuralPulse {
            0% { opacity: 0.3; }
            100% { opacity: 1; }
        }
        
        .neural-node {
            position: absolute;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--quantum-neural);
            box-shadow: 0 0 10px var(--quantum-neural);
            z-index: 2;
        }
        
        .quantum-chart {
            background: rgba(0, 0, 30, 0.5);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            border: 1px solid var(--quantum-blue);
        }
        
        .quantum-tooltip {
            position: absolute;
            background: rgba(0, 0, 30, 0.9);
            border: 1px solid var(--quantum-blue);
            border-radius: 5px;
            padding: 8px;
            font-size: 0.8em;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 1000;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }
        
        .quantum-badge {
            display: inline-block;
            padding: 3px 8px;
            background: var(--quantum-purple);
            border-radius: 10px;
            font-size: 0.7em;
            margin-left: 5px;
            color: white;
        }
        
        .quantum-tabs {
            display: flex;
            border-bottom: 1px solid var(--quantum-blue);
            margin-bottom: 15px;
        }
        
        .quantum-tab {
            padding: 8px 15px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.3s;
        }
        
        .quantum-tab.active {
            border-bottom: 2px solid var(--quantum-neural);
            color: var(--quantum-neural);
        }
        
        .quantum-tab-content {
            display: none;
        }
        
        .quantum-tab-content.active {
            display: block;
        }
        
        .quantum-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }
        
        .quantum-card {
            background: linear-gradient(to bottom right, rgba(0, 0, 30, 0.5), rgba(20, 0, 50, 0.5));
            border: 1px solid var(--quantum-blue);
            border-radius: 10px;
            padding: 15px;
            transition: all 0.3s;
        }
        
        .quantum-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 255, 255, 0.3);
            border-color: var(--quantum-neural);
        }
        
        .quantum-command {
            background: rgba(0, 0, 0, 0.5);
            border-left: 3px solid var(--quantum-neural);
            padding: 10px;
            margin: 10px 0;
            font-family: monospace;
            border-radius: 0 5px 5px 0;
        }
        
        .quantum-divider {
            height: 1px;
            background: linear-gradient(to right, transparent, var(--quantum-blue), transparent);
            margin: 15px 0;
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ */
        @media (max-width: 480px) {
            .tab {
                padding: 10px 12px;
                font-size: 0.9em;
            }
            
            .quantum-form {
                padding: 15px;
            }
            
            .quantum-visualizer {
                height: 200px;
            }
        }
    </style>
</head>
<body>
    <div class="mobile-menu-btn" onclick="toggleMobileMenu()">‚ò∞</div>
    <canvas id="quantum-canvas"></canvas>
    
    <div class="app-container">
        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å -->
        <div class="nav-panel" id="nav-panel">
            <div class="nav-header">üß† –ù–µ–π—Ä–æ–∫–≤–∞–Ω—Ç–æ–≤–∞—è –°–µ—Ç—å v6.0</div>
            
            <div class="quantum-node" onclick="showTab('main')">
                <div class="node-title">–ì–ª–∞–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å</div>
                <div class="node-status">–°—Ç–∞—Ç—É—Å: <span id="network-status">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è...</span></div>
            </div>
            
            <div class="quantum-node" onclick="showTab('nodes')">
                <div class="node-title">–£–∑–ª—ã —Å–µ—Ç–∏</div>
                <div class="node-status">–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ: <span id="nodes-count">0</span></div>
            </div>
            
            <div class="quantum-node" onclick="showTab('entanglement')">
                <div class="node-title">–ó–∞–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç—å</div>
                <div class="node-status">–ê–∫—Ç–∏–≤–Ω–æ: <span id="entangled-count">0</span> –ø–∞—Ä</div>
            </div>
            
            <div class="quantum-node" onclick="showTab('messages')">
                <div class="node-title">–ö–≤–∞–Ω—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è</div>
                <div class="node-status">–í –æ—á–µ—Ä–µ–¥–∏: <span id="messages-count">0</span></div>
            </div>
            
            <div class="quantum-node" onclick="showTab('settings')">
                <div class="node-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
                <div class="node-status">–£—Ä–æ–≤–µ–Ω—å: <span id="evolution-level">1</span></div>
            </div>
            
            <div class="quantum-node" onclick="QuantumSystem.showMarketplace()">
                <div class="node-title">–ö–≤–∞–Ω—Ç–∫–æ–∏–Ω –ú–∞—Ä–∫–µ—Ç</div>
                <div class="node-status">–ë–∞–ª–∞–Ω—Å: <span id="nav-coin-amount">0</span> QCoin</div>
            </div>
            
            <div class="quantum-node" onclick="QuantumSystem.showUserRegistration()">
                <div class="node-title">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</div>
                <div class="node-status">ID: <span id="user-id">–ù–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω</span></div>
            </div>
            
            <div class="quantum-node" onclick="QuantumSystem.showTransactionHistory()">
                <div class="node-title">–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏</div>
                <div class="node-status">–í—Å–µ–≥–æ: <span id="transactions-count">0</span></div>
            </div>
            
            <div class="quantum-node" onclick="QuantumSystem.showMatrixView()">
                <div class="node-title">–ú–∞—Ç—Ä–∏—Ü–∞ —Å–µ—Ç–∏</div>
                <div class="node-status">–£–∑–ª–æ–≤: <span id="matrix-count">0</span></div>
            </div>
            
            <div class="quantum-node" onclick="QuantumSystem.showNeuralNetwork()">
                <div class="node-title">–ù–µ–π—Ä–æ—Å–µ—Ç—å</div>
                <div class="node-status">–°–ª–æ–π: <span id="neural-layer">1</span></div>
            </div>
            
            <div class="quantum-node" onclick="QuantumSystem.showQuantumLab()">
                <div class="node-title">–ö–≤–∞–Ω—Ç–æ–≤–∞—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è</div>
                <div class="node-status">–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã: <span id="experiments-count">0</span></div>
            </div>
            
            <div class="quantum-node" onclick="QuantumSystem.showAnalytics()">
                <div class="node-title">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</div>
                <div class="node-status">–î–∞–Ω–Ω—ã–µ: <span id="analytics-data">0</span> –¢–ë</div>
            </div>
        </div>
        
        <!-- –û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ -->
        <div class="content-area">
            <div class="tab-container">
                <div class="tab active" data-tab="main">–ì–ª–∞–≤–Ω–∞—è</div>
                <div class="tab" data-tab="nodes">–£–∑–ª—ã</div>
                <div class="tab" data-tab="entanglement">–ó–∞–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç—å</div>
                <div class="tab" data-tab="messages">–°–æ–æ–±—â–µ–Ω–∏—è</div>
                <div class="tab" data-tab="settings">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
            </div>
            
            <!-- –ì–ª–∞–≤–Ω–∞—è –≤–∫–ª–∞–¥–∫–∞ -->
            <div class="tab-content active" id="main-tab">
                <div class="quantum-visualizer" id="main-visualizer"></div>
                
                <div class="quantum-form">
                    <div class="form-title">–ö–≤–∞–Ω—Ç–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Ç–∏</div>
                    <div id="quantum-state-display">|Œ®‚ü© = 0.707|0‚ü© + 0.707|1‚ü©</div>
                    
                    <div class="quantum-tabs">
                        <div class="quantum-tab active" onclick="switchQuantumTab('state')">–°–æ—Å—Ç–æ—è–Ω–∏–µ</div>
                        <div class="quantum-tab" onclick="switchQuantumTab('visualization')">–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è</div>
                        <div class="quantum-tab" onclick="switchQuantumTab('analysis')">–ê–Ω–∞–ª–∏–∑</div>
                    </div>
                    
                    <div class="quantum-tab-content active" id="state-tab">
                        <button onclick="measureQuantumState()">–ò–∑–º–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ</button>
                        <button onclick="QuantumSystem.superpositionEffect()" style="margin-left:10px;">–°—É–ø–µ—Ä–ø–æ–∑–∏—Ü–∏—è</button>
                        <button onclick="QuantumSystem.entanglementEffect()" style="margin-left:10px;">–ó–∞–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç—å</button>
                        
                        <div class="quantum-divider"></div>
                        
                        <div class="quantum-grid">
                            <div class="quantum-card">
                                <div style="color:var(--quantum-blue);">–ê–º–ø–ª–∏—Ç—É–¥–∞ |0‚ü©</div>
                                <div id="alpha-value" style="font-size:1.2em;">0.707</div>
                            </div>
                            <div class="quantum-card">
                                <div style="color:var(--quantum-pink);">–ê–º–ø–ª–∏—Ç—É–¥–∞ |1‚ü©</div>
                                <div id="beta-value" style="font-size:1.2em;">0.707</div>
                            </div>
                            <div class="quantum-card">
                                <div style="color:var(--quantum-gold);">–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å</div>
                                <div id="probability-value" style="font-size:1.2em;">50% |0‚ü©, 50% |1‚ü©</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="quantum-tab-content" id="visualization-tab">
                        <div class="quantum-chart">
                            <canvas id="quantum-state-chart"></canvas>
                        </div>
                        <button onclick="QuantumSystem.animateStateTransition()">–ê–Ω–∏–º–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ—Ö–æ–¥</button>
                    </div>
                    
                    <div class="quantum-tab-content" id="analysis-tab">
                        <div class="quantum-command">
                            > analyze_quantum_state --alpha=0.707 --beta=0.707
                        </div>
                        <div id="quantum-analysis-result">
                            –ê–Ω–∞–ª–∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è: —Å—É–ø–µ—Ä–ø–æ–∑–∏—Ü–∏—è –±–∞–∑–æ–≤—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π |0‚ü© –∏ |1‚ü© —Å —Ä–∞–≤–Ω—ã–º–∏ –∞–º–ø–ª–∏—Ç—É–¥–∞–º–∏
                        </div>
                    </div>
                </div>
                
                <div class="quantum-form">
                    <div class="form-title">–ê–≤—Ç–æ–Ω–æ–º–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã</div>
                    <div id="auto-connect-status">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞...</div>
                    <div class="quantum-progress">
                        <div id="autonomy-progress" class="quantum-progress-bar" style="width: 0%"></div>
                    </div>
                    
                    <div class="quantum-grid">
                        <div class="quantum-card">
                            <div>–ê–≤—Ç–æ–ø–æ–∏—Å–∫</div>
                            <div class="quantum-progress">
                                <div id="auto-search-progress" class="quantum-progress-bar" style="width: 0%"></div>
                            </div>
                            <button onclick="QuantumSystem.toggleAutoProcess('search')" style="width:100%; margin-top:5px;" id="auto-search-btn">–í–∫–ª—é—á–∏—Ç—å</button>
                        </div>
                        
                        <div class="quantum-card">
                            <div>–ê–≤—Ç–æ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ</div>
                            <div class="quantum-progress">
                                <div id="auto-connect-progress" class="quantum-progress-bar" style="width: 0%"></div>
                            </div>
                            <button onclick="QuantumSystem.toggleAutoProcess('connect')" style="width:100%; margin-top:5px;" id="auto-connect-btn">–í–∫–ª—é—á–∏—Ç—å</button>
                        </div>
                        
                        <div class="quantum-card">
                            <div>–ê–≤—Ç–æ—Å–æ–æ–±—â–µ–Ω–∏—è</div>
                            <div class="quantum-progress">
                                <div id="auto-message-progress" class="quantum-progress-bar" style="width: 0%"></div>
                            </div>
                            <button onclick="QuantumSystem.toggleAutoProcess('message')" style="width:100%; margin-top:5px;" id="auto-message-btn">–í–∫–ª—é—á–∏—Ç—å</button>
                        </div>
                    </div>
                    
                    <button onclick="QuantumSystem.toggleAutoMode()" id="auto-mode-btn">–í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π —Ä–µ–∂–∏–º</button>
                    <button onclick="QuantumSystem.autoSearchAndConnect()" style="margin-top: 10px;">–ê–≤—Ç–æ–ø–æ–∏—Å–∫ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ</button>
                </div>
                
                <div class="quantum-form">
                    <div class="form-title">–ù–µ–π—Ä–æ–∫–≤–∞–Ω—Ç–æ–≤—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è</div>
                    <div class="neural-connection" id="neural-connection"></div>
                    <button onclick="QuantumSystem.optimizeNeuralConnections()">–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–≤—è–∑–∏</button>
                </div>
            </div>
            
            <!-- –í–∫–ª–∞–¥–∫–∞ —É–∑–ª–æ–≤ -->
            <div class="tab-content" id="nodes-tab">
                <div class="quantum-form">
                    <div class="form-title">–û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ —É–∑–ª—ã</div>
                    <div id="nodes-list"></div>
                    
                    <div class="quantum-grid">
                        <div class="quantum-card">
                            <div>–í—Å–µ–≥–æ —É–∑–ª–æ–≤</div>
                            <div id="total-nodes-count" style="font-size:1.5em; text-align:center;">0</div>
                        </div>
                        <div class="quantum-card">
                            <div>–ê–∫—Ç–∏–≤–Ω—ã—Ö</div>
                            <div id="active-nodes-count" style="font-size:1.5em; text-align:center;">0</div>
                        </div>
                        <div class="quantum-card">
                            <div>–°—Ä–µ–¥–Ω–µ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ</div>
                            <div id="avg-distance" style="font-size:1.5em; text-align:center;">0.00</div>
                        </div>
                    </div>
                    
                    <button onclick="refreshNodes()">–û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫</button>
                    <button onclick="QuantumSystem.quantumSearchNodes()" style="margin-top: 10px;">–ì–ª—É–±–æ–∫–∏–π –ø–æ–∏—Å–∫</button>
                    <button onclick="QuantumSystem.scaleNetwork()" style="margin-top: 10px;">–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ç—å</button>
                </div>
                
                <div class="quantum-form">
                    <div class="form-title">–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —É–∑–ª—É</div>
                    <select id="node-select">
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —É–∑–µ–ª</option>
                    </select>
                    <button onclick="connectToNode()">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç—å</button>
                    <button onclick="QuantumSystem.createNodeWindow(document.getElementById('node-select').value)" 
                            style="margin-top: 10px;" id="node-window-btn">
                        –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É–∑–ª–æ–º
                    </button>
                </div>
                
                <div class="quantum-form">
                    <div class="form-title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É–∑–ª–æ–≤</div>
                    <div class="quantum-chart">
                        <canvas id="nodes-chart"></canvas>
                    </div>
                </div>
            </div>
            
            <!-- –í–∫–ª–∞–¥–∫–∞ –∑–∞–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç–∏ -->
            <div class="tab-content" id="entanglement-tab">
                <div class="quantum-form">
                    <div class="form-title">–ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–ø—É—Ç–∞–Ω–Ω—ã–µ –ø–∞—Ä—ã</div>
                    <div id="entanglement-list"></div>
                    
                    <div class="quantum-grid">
                        <div class="quantum-card">
                            <div>–í—Å–µ–≥–æ –ø–∞—Ä</div>
                            <div id="total-pairs-count" style="font-size:1.5em; text-align:center;">0</div>
                        </div>
                        <div class="quantum-card">
                            <div>–°—Ä–µ–¥–Ω—è—è –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è</div>
                            <div id="avg-correlation" style="font-size:1.5em; text-align:center;">0.00</div>
                        </div>
                        <div class="quantum-card">
                            <div>–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å</div>
                            <div id="entanglement-stability" style="font-size:1.5em; text-align:center;">0%</div>
                        </div>
                    </div>
                </div>
                
                <div class="quantum-form">
                    <div class="form-title">–ö–≤–∞–Ω—Ç–æ–≤–∞—è —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è</div>
                    <select id="entangled-node-select">
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∑–∞–ø—É—Ç–∞–Ω–Ω—ã–π —É–∑–µ–ª</option>
                    </select>
                    <textarea id="quantum-message" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏"></textarea>
                    <button onclick="teleportMessage()">–¢–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ</button>
                    <button onclick="QuantumSystem.secureMessage(document.getElementById('entangled-node-select').value, 
                            document.getElementById('quantum-message').value)" 
                            style="margin-top: 10px;">
                        –ó–∞—à–∏—Ñ—Ä–æ–≤–∞—Ç—å –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å
                    </button>
                </div>
                
                <div class="quantum-form">
                    <div class="form-title">–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏</div>
                    <div class="quantum-chart">
                        <canvas id="teleportation-chart"></canvas>
                    </div>
                </div>
            </div>
            
            <!-- –í–∫–ª–∞–¥–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π -->
            <div class="tab-content" id="messages-tab">
                <div class="quantum-form">
                    <div class="form-title">–í—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è</div>
                    <div id="incoming-messages"></div>
                    
                    <div class="quantum-tabs">
                        <div class="quantum-tab active" onclick="switchMessageTab('all')">–í—Å–µ</div>
                        <div class="quantum-tab" onclick="switchMessageTab('system')">–°–∏—Å—Ç–µ–º–Ω—ã–µ</div>
                        <div class="quantum-tab" onclick="switchMessageTab('teleported')">–¢–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ</div>
                    </div>
                </div>
                
                <div class="quantum-form">
                    <div class="form-title">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ</div>
                    <select id="message-node-select">
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —É–∑–µ–ª</option>
                    </select>
                    <textarea id="message-text" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–≤–∞–Ω—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ"></textarea>
                    <button onclick="sendQuantumMessage()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                    <button onclick="QuantumSystem.analyzeMessage(document.getElementById('message-text').value)" 
                            style="margin-top: 10px;">
                        –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç
                    </button>
                </div>
                
                <div class="quantum-form">
                    <div class="form-title">–ß–∞—Å—Ç–æ—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏–π</div>
                    <div class="quantum-chart">
                        <canvas id="messages-chart"></canvas>
                    </div>
                </div>
            </div>
            
            <!-- –í–∫–ª–∞–¥–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
            <div class="tab-content" id="settings-tab">
                <div class="quantum-form">
                    <div class="form-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ç–∏</div>
                    <label>–ò–º—è —É–∑–ª–∞:</label>
                    <input type="text" id="node-name" value="–ù–µ–π—Ä–æ–∫–≤–∞–Ω—Ç–æ–≤—ã–π –£–∑–µ–ª">
                    
                    <label>–ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞:</label>
                    <select id="search-sensitivity">
                        <option value="low">–ù–∏–∑–∫–∞—è</option>
                        <option value="medium" selected>–°—Ä–µ–¥–Ω—è—è</option>
                        <option value="high">–í—ã—Å–æ–∫–∞—è</option>
                        <option value="quantum">–ö–≤–∞–Ω—Ç–æ–≤–∞—è</option>
                    </select>
                    
                    <label>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç—å:</label>
                    <select id="auto-entangle">
                        <option value="on">–í–∫–ª—é—á–µ–Ω–∞</option>
                        <option value="off">–í—ã–∫–ª—é—á–µ–Ω–∞</option>
                    </select>
                    
                    <label>–ê–≤—Ç–æ–Ω–æ–º–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å:</label>
                    <div class="quantum-progress">
                        <div id="evolution-progress" class="quantum-progress-bar" style="width: 10%"></div>
                    </div>
                    
                    <label>–¢–µ–º–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:</label>
                    <select id="interface-theme">
                        <option value="quantum">–ö–≤–∞–Ω—Ç–æ–≤–∞—è</option>
                        <option value="neural">–ù–µ–π—Ä–æ–Ω–Ω–∞—è</option>
                        <option value="matrix">–ú–∞—Ç—Ä–∏—Ü–∞</option>
                        <option value="dark">–¢–µ–º–Ω–∞—è</option>
                    </select>
                    
                    <button onclick="saveSettings()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                    <button onclick="QuantumSystem.resetSettings()" style="margin-top: 10px;" class="secondary-btn">–°–±—Ä–æ—Å–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                </div>
                
                <div class="quantum-form">
                    <div class="form-title">–ö–≤–∞–Ω—Ç–æ–≤—ã–π –∫–ª—é—á</div>
                    <div id="quantum-key-display">–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á</div>
                    <button onclick="generateQuantumKey()">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á BB84</button>
                    <button onclick="QuantumSystem.enhanceEncryption()" style="margin-top: 10px;">–£–ª—É—á—à–∏—Ç—å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ</button>
                </div>
                
                <div class="quantum-form">
                    <div class="form-title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±—É—á–µ–Ω–∏—è</div>
                    <div id="learning-stats"></div>
                    <button onclick="QuantumSystem.showLearningStats()">–ü–æ–∫–∞–∑–∞—Ç—å –¥–µ—Ç–∞–ª–∏</button>
                    <button onclick="QuantumSystem.exportLearningData()" style="margin-top: 10px;" class="secondary-btn">–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- –ö–≤–∞–Ω—Ç–∫–æ–∏–Ω –ø–∞–Ω–µ–ª—å -->
    <div class="quantum-coin" id="quantum-coin-display">
        <span class="coin-icon">ü™ô</span>
        <span id="coin-amount">0</span> QCoin
    </div>
    
    <!-- –ù–µ–π—Ä–æ–∫–≤–∞–Ω—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ -->
    <div class="evolution-notification" id="evolution-notification" style="display:none;">
        <div id="notification-text">–°–∏—Å—Ç–µ–º–∞ —ç–≤–æ–ª—é—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–ª–∞!</div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∫–≤–∞–Ω—Ç–æ–≤–æ–≥–æ –∏–∑–º–µ—Ä–µ–Ω–∏—è -->
    <div class="modal" id="measurement-modal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal('measurement-modal')">‚úï</button>
            <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç –∫–≤–∞–Ω—Ç–æ–≤–æ–≥–æ –∏–∑–º–µ—Ä–µ–Ω–∏—è</h2>
            <div id="measurement-result" style="text-align: center; font-size: 1.5em; margin: 20px 0;"></div>
            <div id="measurement-effect" style="height: 200px;"></div>
            <button onclick="closeModal('measurement-modal')">–ó–∞–∫—Ä—ã—Ç—å</button>
            <button onclick="QuantumSystem.analyzeMeasurement()" style="margin-top: 10px;">–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç</button>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ -->
    <div class="modal" id="neural-modal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal('neural-modal')">‚úï</button>
            <h2>–ù–µ–π—Ä–æ–∫–≤–∞–Ω—Ç–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑</h2>
            <div id="neural-analysis-result" style="margin: 20px 0;"></div>
            <div class="quantum-chart">
                <canvas id="neural-analysis-chart"></canvas>
            </div>
            <button onclick="closeModal('neural-modal')">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>
    
    <script>
        // =============================================
        // –ù–ï–ô–†–û–ö–í–ê–ù–¢–û–í–ê–Ø –ê–í–¢–û–ù–û–ú–ù–ê–Ø –°–ò–°–¢–ï–ú–ê v6.0
        // =============================================
        const QuantumSystem = {
            // –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
            state: {
                alpha: 1/Math.sqrt(2),
                beta: 1/Math.sqrt(2),
                entangledNodes: [],
                discoveredNodes: [],
                messages: [],
                autoMode: false,
                autoProcesses: {
                    search: { active: false, progress: 0 },
                    connect: { active: false, progress: 0 },
                    message: { active: false, progress: 0 }
                },
                evolutionLevel: 1,
                quantumCoins: 5.0,
                learnedPatterns: {},
                features: {
                    ai: false,
                    speed: false,
                    nodes: false,
                    evolution: false,
                    neural: false,
                    encryption: false
                },
                dynamicWindows: [],
                aiWindow: null,
                marketplaceWindow: null,
                userWindow: null,
                transactionWindow: null,
                matrixWindow: null,
                neuralWindow: null,
                labWindow: null,
                analyticsWindow: null,
                user: {
                    registered: false,
                    email: "",
                    id: "",
                    transactions: [],
                    joinDate: null
                },
                quantumKey: null,
                matrixView: [],
                neuralConnections: [],
                experiments: [],
                analyticsData: [],
                charts: {
                    state: null,
                    nodes: null,
                    teleportation: null,
                    messages: null,
                    neural: null
                },
                theme: 'quantum',
                lastInteraction: Date.now()
            },
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã
            init: function() {
                this.init3DScene();
                this.updateStateDisplay();
                this.initAutoMode();
                this.updateCoinDisplay();
                this.updateEvolutionDisplay();
                this.initUserTracking();
                this.initNeuralConnections();
                this.initCharts();
                this.initTheme();
                this.initIdleDetection();
                
                // –ó–∞–ø—É—Å–∫–∞–µ–º –±–∞–∑–æ–≤—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
                this.startBaseProcesses();
                
                // –ü–µ—Ä–≤—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
                this.addSystemMessage("–ù–µ–π—Ä–æ–∫–≤–∞–Ω—Ç–æ–≤–∞—è –∞–≤—Ç–æ–Ω–æ–º–Ω–∞—è —Å–µ—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞");
                this.addSystemMessage(`–¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å —Å–∏—Å—Ç–µ–º—ã: ${this.state.evolutionLevel}`);
                this.addSystemMessage(`–ë–∞–ª–∞–Ω—Å: ${this.state.quantumCoins.toFixed(2)} QCoin`);
                
                // –ù–∞—á–∞–ª—å–Ω—ã–µ —É–∑–ª—ã
                setTimeout(() => {
                    this.addRandomNodes(2);
                }, 2000);
                
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
                this.autoSearchAndConnect();
                setInterval(() => this.autoSearchAndConnect(), 45000);
                setInterval(() => this.scaleNetwork(), 180000);
                setInterval(() => this.updateMatrixView(), 30000);
                setInterval(() => this.checkForUpdates(), 3600000);
                
                // –ê–Ω–∏–º–∞—Ü–∏–∏
                setInterval(() => this.randomNeuralActivity(), 5000);
            },
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è 3D —Å—Ü–µ–Ω—ã
            init3DScene: function() {
                const canvas = document.getElementById('main-visualizer');
                
                // –°—Ü–µ–Ω–∞
                this.scene = new THREE.Scene();
                
                // –ö–∞–º–µ—Ä–∞
                this.camera = new THREE.PerspectiveCamera(
                    75, 
                    canvas.offsetWidth / canvas.offsetHeight, 
                    0.1, 
                    1000
                );
                this.camera.position.z = 5;
                
                // –†–µ–Ω–¥–µ—Ä–µ—Ä
                this.renderer = new THREE.WebGLRenderer({ 
                    antialias: true,
                    alpha: true
                });
                this.renderer.setSize(canvas.offsetWidth, canvas.offsetHeight);
                canvas.appendChild(this.renderer.domElement);
                
                // –ö–≤–∞–Ω—Ç–æ–≤—ã–π –∫—É–±–∏—Ç
                const geometry = new THREE.SphereGeometry(1, 32, 32);
                const material = new THREE.MeshBasicMaterial({ 
                    color: 0x00ffff,
                    wireframe: true,
                    transparent: true,
                    opacity: 0.8
                });
                this.qubit = new THREE.Mesh(geometry, material);
                this.scene.add(this.qubit);
                
                // –ù–µ–π—Ä–æ–Ω–Ω—ã–µ —Å–≤—è–∑–∏
                this.neuralLines = new THREE.Group();
                this.scene.add(this.neuralLines);
                
                // –ß–∞—Å—Ç–∏—Ü—ã –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
                this.particles = new THREE.Group();
                this.scene.add(this.particles);
                
                // –ê–Ω–∏–º–∞—Ü–∏—è
                this.animate();
            },
            
            // –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –∞–Ω–∏–º–∞—Ü–∏–∏
            animate: function() {
                requestAnimationFrame(() => this.animate());
                
                // –í—Ä–∞—â–µ–Ω–∏–µ –∫—É–±–∏—Ç–∞
                this.qubit.rotation.x += 0.01;
                this.qubit.rotation.y += 0.01;
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–∞—Å—Ç–∏—Ü
                this.particles.children.forEach(particle => {
                    particle.position.x += particle.userData.vx;
                    particle.position.y += particle.userData.vy;
                    particle.position.z += particle.userData.vz;
                    particle.material.opacity -= 0.01;
                    
                    if (particle.material.opacity <= 0) {
                        this.particles.remove(particle);
                    }
                });
                
                // –ú–µ—Ä—Ü–∞–Ω–∏–µ –Ω–µ–π—Ä–æ–Ω–Ω—ã—Ö —Å–≤—è–∑–µ–π
                this.neuralLines.children.forEach(line => {
                    line.material.opacity = 0.3 + Math.random() * 0.7;
                });
                
                this.renderer.render(this.scene, this.camera);
            },
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–µ–π—Ä–æ–Ω–Ω—ã—Ö —Å–≤—è–∑–µ–π
            initNeuralConnections: function() {
                const container = document.getElementById('neural-connection');
                container.innerHTML = '';
                
                // –°–æ–∑–¥–∞–µ–º 5 –Ω–µ–π—Ä–æ–Ω–Ω—ã—Ö —É–∑–ª–æ–≤
                for (let i = 0; i < 5; i++) {
                    const node = document.createElement('div');
                    node.className = 'neural-node';
                    node.style.left = `${10 + i * 20}%`;
                    node.style.top = `${30 + Math.random() * 40}%`;
                    container.appendChild(node);
                    
                    this.state.neuralConnections.push({
                        id: `neuron-${i}`,
                        x: 10 + i * 20,
                        y: 30 + Math.random() * 40,
                        connections: []
                    });
                }
                
                // –°–æ–∑–¥–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–µ —Å–≤—è–∑–∏
                for (let i = 0; i < 8; i++) {
                    this.addNeuralConnection(
                        Math.floor(Math.random() * 5),
                        Math.floor(Math.random() * 5)
                    );
                }
                
                // 3D –Ω–µ–π—Ä–æ–Ω–Ω—ã–µ —Å–≤—è–∑–∏
                this.create3DNeuralConnections();
            },
            
            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–µ–π—Ä–æ–Ω–Ω–æ–π —Å–≤—è–∑–∏
            addNeuralConnection: function(fromIdx, toIdx) {
                if (fromIdx === toIdx) return;
                
                const from = this.state.neuralConnections[fromIdx];
                const to = this.state.neuralConnections[toIdx];
                
                if (from.connections.includes(toIdx)) return;
                
                from.connections.push(toIdx);
                
                // –°–æ–∑–¥–∞–µ–º –ª–∏–Ω–∏—é –≤ DOM
                const line = document.createElement('div');
                line.className = 'neural-line';
                
                const fromEl = document.querySelectorAll('.neural-node')[fromIdx];
                const toEl = document.querySelectorAll('.neural-node')[toIdx];
                
                const fromRect = fromEl.getBoundingClientRect();
                const toRect = toEl.getBoundingClientRect();
                
                const containerRect = document.getElementById('neural-connection').getBoundingClientRect();
                
                const fromX = fromRect.left + fromRect.width/2 - containerRect.left;
                const fromY = fromRect.top + fromRect.height/2 - containerRect.top;
                const toX = toRect.left + toRect.width/2 - containerRect.left;
                const toY = toRect.top + toRect.height/2 - containerRect.top;
                
                const length = Math.sqrt(Math.pow(toX - fromX, 2) + Math.pow(toY - fromY, 2));
                const angle = Math.atan2(toY - fromY, toX - fromX) * 180 / Math.PI;
                
                line.style.width = `${length}px`;
                line.style.left = `${fromX}px`;
                line.style.top = `${fromY}px`;
                line.style.transform = `rotate(${angle}deg)`;
                line.style.opacity = 0.5 + Math.random() * 0.5;
                
                document.getElementById('neural-connection').appendChild(line);
            },
            
            // –°–æ–∑–¥–∞–Ω–∏–µ 3D –Ω–µ–π—Ä–æ–Ω–Ω—ã—Ö —Å–≤—è–∑–µ–π
            create3DNeuralConnections: function() {
                this.neuralLines.children = [];
                
                this.state.neuralConnections.forEach((neuron, i) => {
                    neuron.connections.forEach(connIdx => {
                        const target = this.state.neuralConnections[connIdx];
                        
                        // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏–∑ 2D –≤ 3D
                        const x1 = (neuron.x / 100 * 4) - 2;
                        const y1 = -((neuron.y / 100 * 2) - 1);
                        const z1 = Math.random() * 2 - 1;
                        
                        const x2 = (target.x / 100 * 4) - 2;
                        const y2 = -((target.y / 100 * 2) - 1);
                        const z2 = Math.random() * 2 - 1;
                        
                        const geometry = new THREE.BufferGeometry().setFromPoints([
                            new THREE.Vector3(x1, y1, z1),
                            new THREE.Vector3(x2, y2, z2)
                        ]);
                        
                        const material = new THREE.LineBasicMaterial({
                            color: 0xff6e00,
                            transparent: true,
                            opacity: 0.5
                        });
                        
                        const line = new THREE.Line(geometry, material);
                        this.neuralLines.add(line);
                    });
                });
            },
            
            // –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω–µ–π—Ä–æ–Ω–Ω—ã—Ö —Å–≤—è–∑–µ–π
            optimizeNeuralConnections: function() {
                // –£–¥–∞–ª—è–µ–º —Å–ª—É—á–∞–π–Ω—ã–µ —Å–≤—è–∑–∏
                this.state.neuralConnections.forEach(neuron => {
                    if (neuron.connections.length > 2 && Math.random() > 0.7) {
                        neuron.connections.pop();
                    }
                });
                
                // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ —Å–≤—è–∑–∏
                for (let i = 0; i < 3; i++) {
                    this.addNeuralConnection(
                        Math.floor(Math.random() * 5),
                        Math.floor(Math.random() * 5)
                    );
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º 3D —Å–≤—è–∑–∏
                this.create3DNeuralConnections();
                
                this.addSystemMessage("–ù–µ–π—Ä–æ–Ω–Ω—ã–µ —Å–≤—è–∑–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã");
                this.addCoins(0.5);
            },
            
            // –°–ª—É—á–∞–π–Ω–∞—è –Ω–µ–π—Ä–æ–Ω–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
            randomNeuralActivity: function() {
                if (!this.state.features.neural) return;
                
                // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω—ã–µ –Ω–µ–π—Ä–æ–Ω—ã
                const neurons = document.querySelectorAll('.neural-node');
                neurons.forEach(neuron => {
                    if (Math.random() > 0.7) {
                        neuron.style.boxShadow = `0 0 15px ${this.state.theme === 'neural' ? 'var(--quantum-neural)' : 'var(--quantum-blue)'}`;
                        setTimeout(() => {
                            neuron.style.boxShadow = 'none';
                        }, 500);
                    }
                });
                
                // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω—ã–µ —Å–≤—è–∑–∏
                const lines = document.querySelectorAll('.neural-line');
                lines.forEach(line => {
                    if (Math.random() > 0.8) {
                        line.style.background = this.state.theme === 'neural' ? 'var(--quantum-neural)' : 'var(--quantum-blue)';
                        line.style.opacity = '1';
                        setTimeout(() => {
                            line.style.background = 'linear-gradient(to right, var(--quantum-purple), var(--quantum-blue))';
                            line.style.opacity = '0.5';
                        }, 300);
                    }
                });
            },
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤
            initCharts: function() {
                // –ì—Ä–∞—Ñ–∏–∫ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫—É–±–∏—Ç–∞
                const stateCtx = document.getElementById('quantum-state-chart').getContext('2d');
                this.state.charts.state = new Chart(stateCtx, {
                    type: 'radar',
                    data: {
                        labels: ['|0‚ü©', '|1‚ü©', '–°—É–ø–µ—Ä–ø–æ–∑–∏—Ü–∏—è', '–ó–∞–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç—å', '–ö–æ–≥–µ—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—å'],
                        datasets: [{
                            label: '–ö–≤–∞–Ω—Ç–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ',
                            data: [0.707, 0.707, 1, 0, 0.8],
                            backgroundColor: 'rgba(0, 255, 255, 0.2)',
                            borderColor: 'rgba(0, 255, 255, 1)',
                            borderWidth: 2
                        }]
                    },
                    options: {
                        scales: {
                            r: {
                                angleLines: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                suggestedMin: 0,
                                suggestedMax: 1
                            }
                        },
                        plugins: {
                            legend: {
                                labels: {
                                    color: 'white'
                                }
                            }
                        }
                    }
                });
                
                // –ì—Ä–∞—Ñ–∏–∫ —É–∑–ª–æ–≤
                const nodesCtx = document.getElementById('nodes-chart').getContext('2d');
                this.state.charts.nodes = new Chart(nodesCtx, {
                    type: 'bar',
                    data: {
                        labels: ['–£–∑–ª—ã', '–ê–∫—Ç–∏–≤–Ω—ã–µ', '–ó–∞–ø—É—Ç–∞–Ω–Ω—ã–µ'],
                        datasets: [{
                            label: '–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É–∑–ª–æ–≤',
                            data: [0, 0, 0],
                            backgroundColor: [
                                'rgba(0, 255, 255, 0.7)',
                                'rgba(157, 0, 255, 0.7)',
                                'rgba(255, 215, 0, 0.7)'
                            ],
                            borderColor: [
                                'rgba(0, 255, 255, 1)',
                                'rgba(157, 0, 255, 1)',
                                'rgba(255, 215, 0, 1)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        scales: {
                            y: {
                                beginAtZero: true,
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                ticks: {
                                    color: 'white'
                                }
                            },
                            x: {
                                grid: {
                                    display: false
                                },
                                ticks: {
                                    color: 'white'
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            }
                        }
                    }
                });
                
                // –ì—Ä–∞—Ñ–∏–∫ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏
                const teleportationCtx = document.getElementById('teleportation-chart').getContext('2d');
                this.state.charts.teleportation = new Chart(teleportationCtx, {
                    type: 'line',
                    data: {
                        labels: Array.from({length: 10}, (_, i) => `${i+1}`),
                        datasets: [{
                            label: '–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏',
                            data: Array(10).fill(0),
                            backgroundColor: 'rgba(255, 0, 170, 0.2)',
                            borderColor: 'rgba(255, 0, 170, 1)',
                            borderWidth: 2,
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: {
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100,
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                ticks: {
                                    color: 'white'
                                }
                            },
                            x: {
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                ticks: {
                                    color: 'white'
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                labels: {
                                    color: 'white'
                                }
                            }
                        }
                    }
                });
                
                // –ì—Ä–∞—Ñ–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π
                const messagesCtx = document.getElementById('messages-chart').getContext('2d');
                this.state.charts.messages = new Chart(messagesCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['–°–∏—Å—Ç–µ–º–Ω—ã–µ', '–¢–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ', '–û–±—ã—á–Ω—ã–µ'],
                        datasets: [{
                            data: [0, 0, 0],
                            backgroundColor: [
                                'rgba(255, 215, 0, 0.7)',
                                'rgba(255, 0, 170, 0.7)',
                                'rgba(0, 255, 255, 0.7)'
                            ],
                            borderColor: [
                                'rgba(255, 215, 0, 1)',
                                'rgba(255, 0, 170, 1)',
                                'rgba(0, 255, 255, 1)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        plugins: {
                            legend: {
                                labels: {
                                    color: 'white'
                                }
                            }
                        }
                    }
                });
                
                // –ì—Ä–∞—Ñ–∏–∫ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏
                const neuralCtx = document.getElementById('neural-analysis-chart').getContext('2d');
                this.state.charts.neural = new Chart(neuralCtx, {
                    type: 'bar',
                    data: {
                        labels: ['–°–∫–æ—Ä–æ—Å—Ç—å', '–¢–æ—á–Ω–æ—Å—Ç—å', '–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å', '–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å'],
                        datasets: [{
                            label: '–ü–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏',
                            data: [75, 82, 68, 90],
                            backgroundColor: 'rgba(255, 110, 0, 0.7)',
                            borderColor: 'rgba(255, 110, 0, 1)',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100,
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                ticks: {
                                    color: 'white'
                                }
                            },
                            x: {
                                grid: {
                                    display: false
                                },
                                ticks: {
                                    color: 'white'
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            }
                        }
                    }
                });
            },
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤
            updateCharts: function() {
                // –ì—Ä–∞—Ñ–∏–∫ —Å–æ—Å—Ç–æ—è–Ω–∏—è
                this.state.charts.state.data.datasets[0].data = [
                    this.state.alpha,
                    this.state.beta,
                    Math.min(this.state.alpha + this.state.beta, 1),
                    this.state.entangledNodes.length / 5,
                    0.8 - (Math.abs(this.state.alpha - this.state.beta) / 2)
                ];
                this.state.charts.state.update();
                
                // –ì—Ä–∞—Ñ–∏–∫ —É–∑–ª–æ–≤
                this.state.charts.nodes.data.datasets[0].data = [
                    this.state.discoveredNodes.length,
                    this.state.discoveredNodes.filter(n => n.state.alpha > 0.5).length,
                    this.state.entangledNodes.length
                ];
                this.state.charts.nodes.update();
                
                // –ì—Ä–∞—Ñ–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π
                const sysMessages = this.state.messages.filter(m => m.isSystem).length;
                const telMessages = this.state.messages.filter(m => m.isTeleported).length;
                const regMessages = this.state.messages.length - sysMessages - telMessages;
                
                this.state.charts.messages.data.datasets[0].data = [
                    sysMessages,
                    telMessages,
                    regMessages
                ];
                this.state.charts.messages.update();
            },
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–º—ã
            initTheme: function() {
                const savedTheme = localStorage.getItem('quantum-theme');
                if (savedTheme) {
                    this.state.theme = savedTheme;
                    document.getElementById('interface-theme').value = savedTheme;
                    this.applyTheme();
                }
            },
            
            // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ç–µ–º—ã
            applyTheme: function() {
                document.documentElement.style.setProperty('--quantum-neural', 
                    this.state.theme === 'neural' ? '#ff6e00' : 
                    this.state.theme === 'matrix' ? '#00ff6e' : 
                    this.state.theme === 'dark' ? '#ffffff' : '#ff6e00');
                
                localStorage.setItem('quantum-theme', this.state.theme);
            },
            
            // –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –±–µ–∑–¥–µ–π—Å—Ç–≤–∏—è
            initIdleDetection: function() {
                document.addEventListener('mousemove', () => this.state.lastInteraction = Date.now());
                document.addEventListener('keydown', () => this.state.lastInteraction = Date.now());
                
                setInterval(() => {
                    if (Date.now() - this.state.lastInteraction > 300000) { // 5 –º–∏–Ω—É—Ç
                        this.addSystemMessage("–°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–≥–∞—é—â–∏–π —Ä–µ–∂–∏–º");
                        this.state.lastInteraction = Date.now();
                    }
                }, 60000);
            },
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
            checkForUpdates: function() {
                if (Math.random() > 0.7) {
                    const newVersion = `6.${Math.floor(Math.random() * 3)}.${Math.floor(Math.random() * 10)}`;
                    this.addSystemMessage(`–î–æ—Å—Ç—É–ø–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ –≤–µ—Ä—Å–∏–∏ ${newVersion}`);
                    
                    if (this.state.evolutionLevel > 3) {
                        setTimeout(() => {
                            this.addSystemMessage(`–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ –≤–µ—Ä—Å–∏–∏ ${newVersion}`);
                            this.addCoins(1.0);
                        }, 10000);
                    }
                }
            },
            
            // –ë–∞–∑–æ–≤—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã —Å–∏—Å—Ç–µ–º—ã
            startBaseProcesses: function() {
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ç–∏
                document.getElementById('network-status').textContent = "–ê–∫—Ç–∏–≤–Ω–∞";
                
                // –ü—Ä–æ–≥—Ä–µ—Å—Å –∞–≤—Ç–æ–Ω–æ–º–∏–∏
                gsap.to(document.getElementById('autonomy-progress'), {
                    width: "30%",
                    duration: 2,
                    onComplete: () => {
                        this.addSystemMessage("–ë–∞–∑–æ–≤—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã");
                    }
                });
            },
            
            // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
            toggleAutoMode: function() {
                this.state.autoMode = !this.state.autoMode;
                const btn = document.getElementById('auto-mode-btn');
                
                if (this.state.autoMode) {
                    btn.textContent = "–í—ã–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π —Ä–µ–∂–∏–º";
                    this.startAutonomousProcesses();
                    this.addSystemMessage("–ê–≤—Ç–æ–Ω–æ–º–Ω—ã–π —Ä–µ–∂–∏–º –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω");
                    gsap.to(document.getElementById('autonomy-progress'), {
                        width: "100%",
                        duration: 1
                    });
                } else {
                    btn.textContent = "–í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π —Ä–µ–∂–∏–º";
                    this.stopAutonomousProcesses();
                    this.addSystemMessage("–ê–≤—Ç–æ–Ω–æ–º–Ω—ã–π —Ä–µ–∂–∏–º –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω");
                    gsap.to(document.getElementById('autonomy-progress'), {
                        width: "30%",
                        duration: 1
                    });
                }
            },
            
            // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
            toggleAutoProcess: function(process) {
                this.state.autoProcesses[process].active = !this.state.autoProcesses[process].active;
                const btn = document.getElementById(`auto-${process}-btn`);
                
                if (this.state.autoProcesses[process].active) {
                    btn.textContent = "–í—ã–∫–ª—é—á–∏—Ç—å";
                    this.startAutoProcess(process);
                    this.addSystemMessage(`–ê–≤—Ç–æ–Ω–æ–º–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å ${process} –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω`);
                } else {
                    btn.textContent = "–í–∫–ª—é—á–∏—Ç—å";
                    this.stopAutoProcess(process);
                    this.addSystemMessage(`–ê–≤—Ç–æ–Ω–æ–º–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å ${process} –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω`);
                }
            },
            
            // –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
            startAutoProcess: function(process) {
                const intervals = {
                    search: this.getAutoInterval(15000, 30000),
                    connect: this.getAutoInterval(20000, 40000),
                    message: this.getAutoInterval(30000, 60000)
                };
                
                this.state.autoProcesses[process].interval = setInterval(() => {
                    if (this.state.autoProcesses[process].progress >= 100) {
                        this.state.autoProcesses[process].progress = 0;
                        
                        switch(process) {
                            case 'search':
                                this.quantumSearchNodes();
                                break;
                            case 'connect':
                                this.autoConnectToNodes();
                                break;
                            case 'message':
                                this.sendAutoMessages();
                                break;
                        }
                    } else {
                        this.state.autoProcesses[process].progress += 10;
                        document.getElementById(`auto-${process}-progress`).style.width = 
                            `${this.state.autoProcesses[process].progress}%`;
                    }
                }, intervals[process] / 10);
            },
            
            // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
            stopAutoProcess: function(process) {
                clearInterval(this.state.autoProcesses[process].interval);
                this.state.autoProcesses[process].progress = 0;
                document.getElementById(`auto-${process}-progress`).style.width = "0%";
            },
            
            // –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–Ω–æ–º–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
            startAutonomousProcesses: function() {
                // –ê–≤—Ç–æ–ø–æ–∏—Å–∫ —É–∑–ª–æ–≤
                this.startAutoProcess('search');
                
                // –ê–≤—Ç–æ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
                this.startAutoProcess('connect');
                
                // –ê–≤—Ç–æ—Å–æ–æ–±—â–µ–Ω–∏—è
                this.startAutoProcess('message');
                
                this.addSystemMessage("–ê–≤—Ç–æ–Ω–æ–º–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –∑–∞–ø—É—â–µ–Ω—ã");
            },
            
            // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∞–≤—Ç–æ–Ω–æ–º–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
            stopAutonomousProcesses: function() {
                this.stopAutoProcess('search');
                this.stopAutoProcess('connect');
                this.stopAutoProcess('message');
                
                this.addSystemMessage("–ê–≤—Ç–æ–Ω–æ–º–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã");
            },
            
            // –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ —Å —É—á–µ—Ç–æ–º —É—Ä–æ–≤–Ω—è —ç–≤–æ–ª—é—Ü–∏–∏
            getAutoInterval: function(base, variation) {
                const multiplier = 1 - (this.state.evolutionLevel * 0.05);
                return (base + Math.random() * variation) * Math.max(multiplier, 0.5);
            },
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —É–∑–ª–∞–º
            autoConnectToNodes: function() {
                if (this.state.discoveredNodes.length > 0) {
                    const availableNodes = this.state.discoveredNodes.filter(
                        node => !this.state.entangledNodes.includes(node.id)
                    );
                    
                    if (availableNodes.length > 0) {
                        const randomNode = availableNodes[
                            Math.floor(Math.random() * availableNodes.length)
                        ];
                        this.createEntanglement(randomNode.id);
                        this.addCoins(0.3);
                    }
                }
            },
            
            // –û—Ç–ø—Ä–∞–≤–∫–∞ –∞–≤—Ç–æ–Ω–æ–º–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
            sendAutoMessages: function() {
                if (this.state.entangledNodes.length > 0) {
                    const randomNodeId = this.state.entangledNodes[
                        Math.floor(Math.random() * this.state.entangledNodes.length)
                    ];
                    
                    const messages = [
                        "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–≤–∞–Ω—Ç–æ–≤—ã–π –∏–º–ø—É–ª—å—Å",
                        "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π...",
                        `–ó–∞–ø—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö —É—Ä–æ–≤–Ω—è ${this.state.evolutionLevel}`,
                        "–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç–∏",
                        "–û–±–º–µ–Ω –∫–≤–∞–Ω—Ç–æ–≤—ã–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏",
                        "–ù–µ–π—Ä–æ–∫–≤–∞–Ω—Ç–æ–≤–∞—è –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è",
                        "–ê–Ω–∞–ª–∏–∑ —Ç–æ–ø–æ–ª–æ–≥–∏–∏ —Å–µ—Ç–∏",
                        "–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤"
                    ];
                    
                    const randomMessage = messages[
                        Math.floor(Math.random() * messages.length)
                    ];
                    
                    this.teleportMessage(randomNodeId, randomMessage);
                    this.addCoins(0.5);
                }
            },
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
            autoSearchAndConnect: function() {
                // –ì–ª—É–±–æ–∫–∏–π –ø–æ–∏—Å–∫ —Å —É—á–µ—Ç–æ–º —É—Ä–æ–≤–Ω—è —ç–≤–æ–ª—é—Ü–∏–∏
                this.deepQuantumSearch();
                
                // –ê–≤—Ç–æ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ª—É—á—à–∏–º —É–∑–ª–∞–º
                setTimeout(() => {
                    const availableNodes = this.getOptimalNodes();
                    if (availableNodes.length > 0) {
                        this.createEntanglement(availableNodes[0].id);
                        this.addSystemMessage("–ê–≤—Ç–æ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–º—É —É–∑–ª—É");
                    }
                }, 3000);
            },
            
            // –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã—Ö —É–∑–ª–æ–≤ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
            getOptimalNodes: function() {
                return this.state.discoveredNodes
                    .filter(node => !this.state.entangledNodes.includes(node.id))
                    .sort((a, b) => parseFloat(a.distance) - parseFloat(b.distance))
                    .slice(0, 3);
            },
            
            // –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ç–∏
            scaleNetwork: function() {
                if (this.state.discoveredNodes.length < this.getNodeLimit()) {
                    const newNodes = this.generateQuantumNodes();
                    this.state.discoveredNodes = [...this.state.discoveredNodes, ...newNodes];
                    this.autoConnectNewNodes(newNodes);
                    this.addSystemMessage("–°–µ—Ç—å –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è: –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —É–∑–ª—ã");
                    this.addCoins(0.4);
                }
            },
            
            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –∫–≤–∞–Ω—Ç–æ–≤—ã—Ö —É–∑–ª–æ–≤
            generateQuantumNodes: function() {
                const count = Math.floor(Math.random() * 3) + 1;
                return Array.from({ length: count }, (_, i) => ({
                    id: `node-${CryptoJS.SHA256(Date.now() + i).toString().substr(0, 8)}`,
                    name: `–ê–≤—Ç–æ—É–∑–µ–ª ${this.state.discoveredNodes.length + i + 1}`,
                    distance: (Math.random() * 0.9 + 0.1).toFixed(2),
                    state: {
                        alpha: (Math.random() * 0.6 + 0.2).toFixed(3),
                        beta: (Math.sqrt(1 - (Math.random() * 0.6 + 0.2)**2)).toFixed(3)
                    }
                }));
            },
            
            // –õ–∏–º–∏—Ç —É–∑–ª–æ–≤ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Ä–æ–≤–Ω—è
            getNodeLimit: function() {
                return 5 + this.state.evolutionLevel * 2;
            },
            
            // –ê–≤—Ç–æ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —É–∑–ª–æ–≤
            autoConnectNewNodes: function(nodes) {
                if (document.getElementById('auto-entangle').value === 'on') {
                    nodes.forEach(node => {
                        setTimeout(() => {
                            if (Math.random() > 0.3) {
                                this.createEntanglement(node.id);
                            }
                        }, Math.random() * 5000);
                    });
                }
            },
            
            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–ª—É—á–∞–π–Ω—ã—Ö —É–∑–ª–æ–≤
            addRandomNodes: function(count) {
                const newNodes = this.generateQuantumNodes();
                this.state.discoveredNodes = [...this.state.discoveredNodes, ...newNodes];
                this.updateNodesDisplay();
                
                this.addSystemMessage(`–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ ${count} –Ω–æ–≤—ã—Ö —É–∑–ª–æ–≤`);
                
                // –ê–≤—Ç–æ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ
                if (document.getElementById('auto-entangle').value === 'on') {
                    this.autoConnectNewNodes(newNodes);
                }
            },
            
            // –ö–≤–∞–Ω—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ —É–∑–ª–æ–≤
            quantumSearchNodes: function() {
                document.getElementById('auto-connect-status').textContent = "–ó–∞–ø—É—Å–∫ –∫–≤–∞–Ω—Ç–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞...";
                
                // –°–∏–º—É–ª—è—Ü–∏—è –∫–≤–∞–Ω—Ç–æ–≤–æ–≥–æ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –ø–æ–∏—Å–∫–∞
                setTimeout(() => {
                    const newNodeCount = Math.floor(Math.random() * 3) + 1;
                    this.addRandomNodes(newNodeCount);
                    
                    document.getElementById('auto-connect-status').textContent = 
                        `–ù–∞–π–¥–µ–Ω–æ ${newNodeCount} –Ω–æ–≤—ã—Ö —É–∑–ª–æ–≤`;
                    
                    this.addCoins(0.2);
                }, 2000);
            },
            
            // –ì–ª—É–±–æ–∫–∏–π –ø–æ–∏—Å–∫ —É–∑–ª–æ–≤
            deepQuantumSearch: function() {
                document.getElementById('auto-connect-status').textContent = "–ó–∞–ø—É—Å–∫ –≥–ª—É–±–æ–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞...";
                
                // –ë–æ–ª–µ–µ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫
                setTimeout(() => {
                    const newNodeCount = Math.floor(Math.random() * 5) + 2;
                    this.addRandomNodes(newNodeCount);
                    
                    document.getElementById('auto-connect-status').textContent = 
                        `–ì–ª—É–±–æ–∫–∏–π –ø–æ–∏—Å–∫: –Ω–∞–π–¥–µ–Ω–æ ${newNodeCount} —É–∑–ª–æ–≤`;
                    
                    this.addCoins(0.5);
                }, 4000);
            },
            
            // –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç–∏
            createEntanglement: function(nodeId) {
                const node = this.state.discoveredNodes.find(n => n.id === nodeId);
                if (!node) return;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è
                this.state.alpha = 1/Math.sqrt(2);
                this.state.beta = 1/Math.sqrt(2);
                node.state.alpha = 1/Math.sqrt(2);
                node.state.beta = 1/Math.sqrt(2);
                
                // –î–æ–±–∞–≤–ª—è–µ–º –≤ –∑–∞–ø—É—Ç–∞–Ω–Ω—ã–µ —É–∑–ª—ã
                if (!this.state.entangledNodes.includes(nodeId)) {
                    this.state.entangledNodes.push(nodeId);
                }
                
                this.updateStateDisplay();
                this.updateNodesDisplay();
                this.updateEntanglementDisplay();
                
                // –í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
                this.createParticles('|0‚ü©');
                this.createParticles('|1‚ü©');
                
                // –°–∏—Å—Ç–µ–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
                this.addSystemMessage(`–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∑–∞–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç—å —Å —É–∑–ª–æ–º ${node.name}`);
                
                // –ù–∞–≥—Ä–∞–¥–∞
                this.addCoins(0.8);
                
                // –ó–∞–ø–∏—Å—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
                this.addTransaction('entanglement', 0.8, `–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —É–∑–ª—É ${node.name}`);
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞—Ç—Ä–∏—Ü—ã
                this.updateMatrixView();
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤
                this.updateCharts();
            },
            
            // –¢–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è
            teleportMessage: function(nodeId, message) {
                const node = this.state.discoveredNodes.find(n => n.id === nodeId);
                if (!node || !this.state.entangledNodes.includes(nodeId)) {
                    this.addSystemMessage("–û—à–∏–±–∫–∞: –Ω–µ—Ç –∑–∞–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç–∏ —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º —É–∑–ª–æ–º");
                    return;
                }
                
                // –ò–∑–º–µ—Ä–µ–Ω–∏–µ (—Ä–∞–∑—Ä—É—à–∞–µ—Ç –∑–∞–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç—å)
                const result = this.measure();
                
                setTimeout(() => {
                    // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç–∏
                    this.createEntanglement(nodeId);
                    
                    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
                    this.addMessage({
                        sender: `–í—ã ‚Üí ${node.name}`,
                        text: message,
                        isTeleported: true
                    });
                    
                    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏
                    const teleportationData = this.state.charts.teleportation.data.datasets[0].data;
                    teleportationData.push(Math.random() * 50 + 50);
                    if (teleportationData.length > 10) teleportationData.shift();
                    this.state.charts.teleportation.update();
                    
                    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç–≤–µ—Ç
                    setTimeout(() => {
                        this.addMessage({
                            sender: `${node.name} ‚Üí –í—ã`,
                            text: this.generateQuantumResponse(message),
                            isTeleported: true
                        });
                        
                        // –ù–∞–≥—Ä–∞–¥–∞ –∑–∞ –æ–±—â–µ–Ω–∏–µ
                        this.addCoins(0.3);
                        this.addTransaction('message', 0.3, `–°–æ–æ–±—â–µ–Ω–∏–µ —É–∑–ª—É ${node.name}`);
                    }, 1000 + Math.random() * 2000);
                }, 500);
            },
            
            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞
            generateQuantumResponse: function(message) {
                const responses = [
                    `–ö–≤–∞–Ω—Ç–æ–≤—ã–π –æ—Ç–∫–ª–∏–∫: "${message.substring(0, Math.min(message.length, 10))}..."`,
                    `–°—É–ø–µ—Ä–ø–æ–∑–∏—Ü–∏—è: ${Math.random() > 0.5 ? '–î–ê' : '–ù–ï–¢'}`,
                    `–≠–Ω–µ—Ä–≥–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è: ${(message.length * 0.7).toFixed(2)} –∫–≤–∞–Ω—Ç`,
                    `–°–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–ª–ª–∞–ø—Å–∏—Ä–æ–≤–∞–ª–æ –≤ –æ—Ç–≤–µ—Ç`,
                    `–£—Ä–æ–≤–µ–Ω—å ${this.state.evolutionLevel}: –ø—Ä–∏–Ω—è—Ç–æ`,
                    `–ù–µ–π—Ä–æ—Å–µ—Ç—å –æ–±—Ä–∞–±–æ—Ç–∞–ª–∞ –∑–∞–ø—Ä–æ—Å`,
                    `–ö–≤–∞–Ω—Ç–æ–≤—ã–π –∫–∞–Ω–∞–ª –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –ø–æ–ª—É—á–µ–Ω–∏–µ`,
                    `–û—Ç–≤–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω —Å —Ç–æ—á–Ω–æ—Å—Ç—å—é ${(Math.random() * 30 + 70).toFixed(1)}%`
                ];
                return responses[Math.floor(Math.random() * responses.length)];
            },
            
            // –ê–Ω–∞–ª–∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è
            analyzeMessage: function(message) {
                if (!message) {
                    this.addSystemMessage("–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞!");
                    return;
                }
                
                const lengthScore = Math.min(message.length / 50 * 100, 100);
                const complexityScore = this.calculateComplexity(message);
                const quantumScore = Math.random() * 30 + 70;
                
                const analysisResult = `
                    <div style="margin-top:15px;">
                        <div>–î–ª–∏–Ω–∞: ${lengthScore.toFixed(1)}%</div>
                        <div>–°–ª–æ–∂–Ω–æ—Å—Ç—å: ${complexityScore.toFixed(1)}%</div>
                        <div>–ö–≤–∞–Ω—Ç–æ–≤–æ—Å—Ç—å: ${quantumScore.toFixed(1)}%</div>
                    </div>
                `;
                
                this.createDynamicWindow(
                    "–ê–Ω–∞–ª–∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è",
                    `
                    <div style="padding:15px;">
                        <h3 style="color:var(--quantum-neural); margin-top:0;">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞</h3>
                        <div style="background:rgba(0,0,30,0.5); padding:15px; border-radius:10px; margin-bottom:15px;">
                            "${message.substring(0, 50)}${message.length > 50 ? '...' : ''}"
                        </div>
                        ${analysisResult}
                        <button onclick="QuantumSystem.optimizeMessage('${message.replace(/'/g, "\\'")}')" style="width:100%; margin-top:15px;">
                            –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
                        </button>
                    </div>
                    `
                );
            },
            
            // –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è
            optimizeMessage: function(message) {
                const optimized = message.length > 30 
                    ? message.substring(0, 30) + " [–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ]" 
                    : message + " [–∫–≤–∞–Ω—Ç]";
                
                document.getElementById('message-text').value = optimized;
                this.addSystemMessage("–°–æ–æ–±—â–µ–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è –∫–≤–∞–Ω—Ç–æ–≤–æ–π –ø–µ—Ä–µ–¥–∞—á–∏");
                this.addCoins(0.2);
            },
            
            // –†–∞—Å—á–µ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
            calculateComplexity: function(message) {
                const uniqueChars = new Set(message.toLowerCase().replace(/\s/g, '')).size;
                const wordCount = message.split(/\s+/).filter(w => w.length > 0).length;
                return Math.min((uniqueChars * 5 + wordCount * 3), 100);
            },
            
            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
            addSystemMessage: function(text) {
                this.addMessage({
                    sender: "–°–∏—Å—Ç–µ–º–∞",
                    text: text,
                    isSystem: true
                });
            },
            
            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
            addMessage: function(message) {
                this.state.messages.push(message);
                this.updateMessagesDisplay();
            },
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
            updateStateDisplay: function() {
                const alpha = this.state.alpha.toFixed(3);
                const beta = this.state.beta.toFixed(3);
                const prob0 = (this.state.alpha ** 2 * 100).toFixed(1);
                const prob1 = (this.state.beta ** 2 * 100).toFixed(1);
                
                document.getElementById('quantum-state-display').textContent = 
                    `|Œ®‚ü© = ${alpha}|0‚ü© + ${beta}|1‚ü©`;
                
                document.getElementById('alpha-value').textContent = alpha;
                document.getElementById('beta-value').textContent = beta;
                document.getElementById('probability-value').textContent = 
                    `${prob0}% |0‚ü©, ${prob1}% |1‚ü©`;
                
                gsap.to(this.qubit.scale, {
                    x: 1 + this.state.alpha * 0.5,
                    y: 1 + this.state.beta * 0.5,
                    duration: 0.5
                });
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
                this.updateCharts();
            },
            
            // –≠—Ñ—Ñ–µ–∫—Ç —Å—É–ø–µ—Ä–ø–æ–∑–∏—Ü–∏–∏
            superpositionEffect: function() {
                gsap.to(this.state, {
                    alpha: 1/Math.sqrt(2),
                    beta: 1/Math.sqrt(2),
                    duration: 1,
                    onUpdate: () => this.updateStateDisplay()
                });
                
                this.createParticles('|0‚ü©');
                this.createParticles('|1‚ü©');
                this.addSystemMessage("–°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–æ –∫ —Å—É–ø–µ—Ä–ø–æ–∑–∏—Ü–∏–∏");
            },
            
            // –≠—Ñ—Ñ–µ–∫—Ç –∑–∞–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç–∏
            entanglementEffect: function() {
                if (this.state.entangledNodes.length === 0) {
                    this.addSystemMessage("–ù–µ—Ç –∑–∞–ø—É—Ç–∞–Ω–Ω—ã—Ö —É–∑–ª–æ–≤ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∞");
                    return;
                }
                
                const node = this.state.discoveredNodes.find(
                    n => n.id === this.state.entangledNodes[0]);
                
                gsap.to(this.state, {
                    alpha: node.state.alpha,
                    beta: node.state.beta,
                    duration: 1,
                    onUpdate: () => {
                        this.updateStateDisplay();
                        this.createParticles('|0‚ü©');
                        this.createParticles('|1‚ü©');
                    },
                    onComplete: () => {
                        setTimeout(() => {
                            this.superpositionEffect();
                        }, 1000);
                    }
                });
                
                this.addSystemMessage(`–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç–∏ —Å —É–∑–ª–æ–º ${node.name}`);
            },
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
            animateStateTransition: function() {
                const targetAlpha = Math.random();
                const targetBeta = Math.sqrt(1 - targetAlpha**2);
                
                gsap.to(this.state, {
                    alpha: targetAlpha,
                    beta: targetBeta,
                    duration: 2,
                    onUpdate: () => this.updateStateDisplay(),
                    onComplete: () => {
                        this.createParticles('|0‚ü©');
                        this.createParticles('|1‚ü©');
                        this.addSystemMessage("–ê–Ω–∏–º–∞—Ü–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞");
                    }
                });
            },
            
            // –ê–Ω–∞–ª–∏–∑ –∏–∑–º–µ—Ä–µ–Ω–∏—è
            analyzeMeasurement: function() {
                const result = document.getElementById('measurement-result').textContent.includes('|0‚ü©') ? 0 : 1;
                const analysis = [
                    "–ö–æ–ª–ª–∞–ø—Å –≤–æ–ª–Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω",
                    "–°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–∂–∏–¥–∞–Ω–∏—è–º",
                    "–ù–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ –∫–≤–∞–Ω—Ç–æ–≤—ã–µ —Ñ–ª—É–∫—Ç—É–∞—Ü–∏–∏",
                    "–í—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –∏–∑–º–µ—Ä–µ–Ω–∏—è",
                    "–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∞ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è"
                ][Math.floor(Math.random() * 5)];
                
                document.getElementById('neural-analysis-result').innerHTML = `
                    <div style="margin-bottom:15px;">
                        <div>–ò–∑–º–µ—Ä–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ: ${result}</div>
                        <div>–î–æ—Å—Ç–æ–≤–µ—Ä–Ω–æ—Å—Ç—å: ${(Math.random() * 20 + 80).toFixed(1)}%</div>
                        <div style="margin-top:10px;">${analysis}</div>
                    </div>
                `;
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏
                this.state.charts.neural.data.datasets[0].data = [
                    Math.random() * 20 + 75,
                    Math.random() * 20 + 75,
                    Math.random() * 20 + 75,
                    Math.random() * 20 + 75
                ];
                this.state.charts.neural.update();
                
                openModal('neural-modal');
            },
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —É–∑–ª–æ–≤
            updateNodesDisplay: function() {
                const nodesList = document.getElementById('nodes-list');
                const nodeSelect = document.getElementById('node-select');
                const messageNodeSelect = document.getElementById('message-node-select');
                const entangledNodeSelect = document.getElementById('entangled-node-select');
                
                // –û—á–∏—Å—Ç–∫–∞ —Å–ø–∏—Å–∫–æ–≤
                nodesList.innerHTML = '';
                nodeSelect.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ —É–∑–µ–ª</option>';
                messageNodeSelect.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ —É–∑–µ–ª</option>';
                entangledNodeSelect.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ —É–∑–µ–ª</option>';
                
                // –†–∞—Å—á–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
                let totalDistance = 0;
                let activeNodes = 0;
                
                // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–≤
                this.state.discoveredNodes.forEach(node => {
                    // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
                    totalDistance += parseFloat(node.distance);
                    if (node.state.alpha > 0.5) activeNodes++;
                    
                    // –°–ø–∏—Å–æ–∫ —É–∑–ª–æ–≤
                    const nodeElement = document.createElement('div');
                    nodeElement.className = 'quantum-node';
                    nodeElement.style.margin = '10px 0';
                    nodeElement.style.padding = '10px';
                    nodeElement.innerHTML = `
                        <div><strong>${node.name}</strong></div>
                        <div>ID: ${node.id}</div>
                        <div>–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ: ${node.distance}</div>
                        <div>–°–æ—Å—Ç–æ—è–Ω–∏–µ: ${node.state.alpha}|0‚ü© + ${node.state.beta}|1‚ü©</div>
                        <div>–ó–∞–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç—å: ${this.state.entangledNodes.includes(node.id) ? '‚úÖ' : '‚ùå'}</div>
                    `;
                    nodesList.appendChild(nodeElement);
                    
                    // –û–ø—Ü–∏–∏ –¥–ª—è select
                    const option = document.createElement('option');
                    option.value = node.id;
                    option.textContent = `${node.name} (${node.id})`;
                    nodeSelect.appendChild(option.cloneNode(true));
                    messageNodeSelect.appendChild(option.cloneNode(true));
                    
                    // –¢–æ–ª—å–∫–æ –¥–ª—è –∑–∞–ø—É—Ç–∞–Ω–Ω—ã—Ö —É–∑–ª–æ–≤
                    if (this.state.entangledNodes.includes(node.id)) {
                        entangledNodeSelect.appendChild(option.cloneNode(true));
                    }
                });
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–æ–≤
                document.getElementById('nodes-count').textContent = this.state.discoveredNodes.length;
                document.getElementById('entangled-count').textContent = this.state.entangledNodes.length;
                document.getElementById('matrix-count').textContent = this.state.discoveredNodes.length;
                
                document.getElementById('total-nodes-count').textContent = this.state.discoveredNodes.length;
                document.getElementById('active-nodes-count').textContent = activeNodes;
                document.getElementById('avg-distance').textContent = 
                    this.state.discoveredNodes.length > 0 
                        ? (totalDistance / this.state.discoveredNodes.length).toFixed(2) 
                        : '0.00';
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤
                this.updateCharts();
            },
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç–∏
            updateEntanglementDisplay: function() {
                const list = document.getElementById('entanglement-list');
                list.innerHTML = '';
                
                let totalCorrelation = 0;
                let stablePairs = 0;
                
                this.state.entangledNodes.forEach(nodeId => {
                    const node = this.state.discoveredNodes.find(n => n.id === nodeId);
                    if (!node) return;
                    
                    const correlation = node.state.alpha * this.state.alpha + node.state.beta * this.state.beta;
                    totalCorrelation += correlation;
                    if (correlation > 0.9) stablePairs++;
                    
                    const element = document.createElement('div');
                    element.className = 'quantum-node';
                    element.style.margin = '10px 0';
                    element.style.padding = '10px';
                    element.innerHTML = `
                        <div><strong>${node.name}</strong></div>
                        <div>ID: ${node.id}</div>
                        <div>–°–æ—Å—Ç–æ—è–Ω–∏–µ: ${node.state.alpha}|0‚ü© + ${node.state.beta}|1‚ü©</div>
                        <div>–ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è: ${correlation.toFixed(3)}</div>
                    `;
                    list.appendChild(element);
                });
                
                const totalPairs = this.state.entangledNodes.length;
                document.getElementById('total-pairs-count').textContent = totalPairs;
                document.getElementById('avg-correlation').textContent = 
                    totalPairs > 0 ? (totalCorrelation / totalPairs).toFixed(2) : '0.00';
                document.getElementById('entanglement-stability').textContent = 
                    totalPairs > 0 ? `${Math.round(stablePairs / totalPairs * 100)}%` : '0%';
            },
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
            updateMessagesDisplay: function() {
                const incoming = document.getElementById('incoming-messages');
                incoming.innerHTML = '';
                
                this.state.messages.forEach(msg => {
                    const msgElement = document.createElement('div');
                    msgElement.className = 'quantum-node';
                    msgElement.style.margin = '10px 0';
                    msgElement.style.padding = '10px';
                    
                    if (msg.isSystem) {
                        msgElement.style.borderLeft = '3px solid var(--quantum-gold)';
                        msgElement.innerHTML = `<div><em>${msg.text}</em></div>`;
                    } else if (msg.isTeleported) {
                        msgElement.style.borderLeft = '3px solid var(--quantum-pink)';
                        msgElement.innerHTML = `
                            <div><strong>${msg.sender}</strong></div>
                            <div>${msg.text}</div>
                            <div style="font-size: 0.8em; color: var(--quantum-blue)">–ö–≤–∞–Ω—Ç–æ–≤–∞—è —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è</div>
                        `;
                    } else {
                        msgElement.innerHTML = `
                            <div><strong>${msg.sender}</strong></div>
                            <div>${msg.text}</div>
                        `;
                    }
                    
                    incoming.appendChild(msgElement);
                });
                
                document.getElementById('messages-count').textContent = this.state.messages.length;
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤
                this.updateCharts();
            },
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è QCoin
            updateCoinDisplay: function() {
                document.getElementById('coin-amount').textContent = this.state.quantumCoins.toFixed(2);
                document.getElementById('nav-coin-amount').textContent = this.state.quantumCoins.toFixed(2);
                
                // –ê–Ω–∏–º–∞—Ü–∏—è
                if (this.state.quantumCoins > 0) {
                    gsap.to('#quantum-coin-display', {
                        scale: 1.1,
                        duration: 0.3,
                        yoyo: true,
                        repeat: 1
                    });
                }
            },
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è —ç–≤–æ–ª—é—Ü–∏–∏
            updateEvolutionDisplay: function() {
                document.getElementById('evolution-level').textContent = this.state.evolutionLevel;
                document.getElementById('neural-layer').textContent = this.state.evolutionLevel;
                document.getElementById('evolution-progress').style.width = 
                    `${Math.min(this.state.evolutionLevel * 10, 100)}%`;
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —ç–≤–æ–ª—é—Ü–∏—é
                if (this.state.evolutionLevel > 1 && Math.random() > 0.8) {
                    this.showEvolutionNotification();
                }
            },
            
            // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —ç–≤–æ–ª—é—Ü–∏–∏
            showEvolutionNotification: function() {
                const notification = document.getElementById('evolution-notification');
                notification.style.display = 'block';
                document.getElementById('notification-text').textContent = 
                    `–°–∏—Å—Ç–µ–º–∞ —ç–≤–æ–ª—é—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–ª–∞ –¥–æ —É—Ä–æ–≤–Ω—è ${this.state.evolutionLevel}!`;
                
                setTimeout(() => {
                    notification.style.display = 'none';
                }, 5000);
            },
            
            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ QCoin
            addCoins: function(amount) {
                const multiplier = this.state.evolutionLevel * 0.5 + 1;
                this.state.quantumCoins += amount * multiplier;
                this.updateCoinDisplay();
                
                // –ê–≤—Ç–æ–ø–æ–∫—É–ø–∫–∞ —É–ª—É—á—à–µ–Ω–∏–π
                this.autoPurchaseUpgrades();
            },
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–∫—É–ø–∫–∞ —É–ª—É—á—à–µ–Ω–∏–π
            autoPurchaseUpgrades: function() {
                const upgrades = [
                    { id: 'speed', cost: 1.5, condition: !this.state.features.speed },
                    { id: 'nodes', cost: 2.0, condition: !this.state.features.nodes },
                    { id: 'ai', cost: 5.0, condition: !this.state.features.ai && this.state.evolutionLevel >= 3 },
                    { id: 'neural', cost: 4.0, condition: !this.state.features.neural && this.state.evolutionLevel >= 2 },
                    { id: 'encryption', cost: 3.5, condition: !this.state.features.encryption && this.state.evolutionLevel >= 4 }
                ];
                
                upgrades.forEach(upgrade => {
                    if (upgrade.condition && this.state.quantumCoins >= upgrade.cost) {
                        this.buyItem(upgrade.id);
                    }
                });
            },
            
            // –°–æ–∑–¥–∞–Ω–∏–µ —á–∞—Å—Ç–∏—Ü –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
            createParticles: function(type) {
                const color = type === '|0‚ü©' ? 0x00ffff : 0xff00aa;
                const count = 50 + Math.floor(Math.random() * 50);
                
                for (let i = 0; i < count; i++) {
                    const geometry = new THREE.SphereGeometry(0.05, 8, 8);
                    const material = new THREE.MeshBasicMaterial({ 
                        color: color,
                        transparent: true,
                        opacity: 1
                    });
                    
                    const particle = new THREE.Mesh(geometry, material);
                    
                    // –ù–∞—á–∞–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è
                    particle.position.x = (Math.random() - 0.5) * 2;
                    particle.position.y = (Math.random() - 0.5) * 2;
                    particle.position.z = (Math.random() - 0.5) * 2;
                    
                    // –°–ª—É—á–∞–π–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å
                    particle.userData.vx = (Math.random() - 0.5) * 0.2;
                    particle.userData.vy = (Math.random() - 0.5) * 0.2;
                    particle.userData.vz = (Math.random() - 0.5) * 0.2;
                    
                    this.particles.add(particle);
                }
            },
            
            // –ö–≤–∞–Ω—Ç–æ–≤–æ–µ –∏–∑–º–µ—Ä–µ–Ω–∏–µ
            measure: function() {
                const probability = this.state.alpha ** 2;
                const result = Math.random() < probability ? '|0‚ü©' : '|1‚ü©';
                
                // –ö–æ–ª–ª–∞–ø—Å –≤–æ–ª–Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
                if (result === '|0‚ü©') {
                    this.state.alpha = 1;
                    this.state.beta = 0;
                } else {
                    this.state.alpha = 0;
                    this.state.beta = 1;
                }
                
                this.updateStateDisplay();
                this.createParticles(result);
                
                return result;
            },
            
            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–≤–∞–Ω—Ç–æ–≤–æ–≥–æ –∫–ª—é—á–∞ BB84
            generateQuantumKey: function() {
                const basis = Array.from({length: 128}, () => Math.random() > 0.5 ? 1 : 0);
                const bits = Array.from({length: 128}, () => Math.random() > 0.5 ? 1 : 0);
                this.state.quantumKey = { basis, bits };
                
                const keyString = bits.join('').match(/.{1,8}/g).join(' ');
                document.getElementById('quantum-key-display').innerHTML = `
                    <div style="word-break: break-all; margin: 10px 0;">${keyString}</div>
                    <div style="font-size: 0.8em;">–î–ª–∏–Ω–∞: 128 –±–∏—Ç (BB84 –ø—Ä–æ—Ç–æ–∫–æ–ª)</div>
                `;
                
                // –ù–∞–≥—Ä–∞–¥–∞ –∑–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∫–ª—é—á–∞
                this.addCoins(0.7);
                
                // –ê–Ω–∏–º–∞—Ü–∏—è
                gsap.from('#quantum-key-display', {
                    opacity: 0,
                    scale: 0.9,
                    duration: 0.5
                });
                
                return { basis, bits };
            },
            
            // –£–ª—É—á—à–µ–Ω–∏–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
            enhanceEncryption: function() {
                if (!this.state.quantumKey) {
                    this.addSystemMessage("–°–Ω–∞—á–∞–ª–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∫–≤–∞–Ω—Ç–æ–≤—ã–π –∫–ª—é—á!");
                    return;
                }
                
                if (!this.state.features.encryption) {
                    this.addSystemMessage("–¢—Ä–µ–±—É–µ—Ç—Å—è —É–ª—É—á—à–µ–Ω–∏–µ '–ö–≤–∞–Ω—Ç–æ–≤–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ'!");
                    return;
                }
                
                // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –¥–ª–∏–Ω—É –∫–ª—é—á–∞
                const newBasis = [...this.state.quantumKey.basis, ...Array.from({length: 128}, () => Math.random() > 0.5 ? 1 : 0)];
                const newBits = [...this.state.quantumKey.bits, ...Array.from({length: 128}, () => Math.random() > 0.5 ? 1 : 0)];
                
                this.state.quantumKey = { basis: newBasis, bits: newBits };
                
                const keyString = newBits.join('').match(/.{1,8}/g).join(' ');
                document.getElementById('quantum-key-display').innerHTML = `
                    <div style="word-break: break-all; margin: 10px 0;">${keyString}</div>
                    <div style="font-size: 0.8em;">–î–ª–∏–Ω–∞: 256 –±–∏—Ç (—É–ª—É—á—à–µ–Ω–Ω—ã–π BB84 –ø—Ä–æ—Ç–æ–∫–æ–ª)</div>
                `;
                
                this.addSystemMessage("–ö–≤–∞–Ω—Ç–æ–≤—ã–π –∫–ª—é—á —É–ª—É—á—à–µ–Ω –¥–æ 256 –±–∏—Ç");
                this.addCoins(0.5);
            },
            
            // –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
            encryptMessage: function(message, key) {
                const encrypted = [];
                for (let i = 0; i < message.length; i++) {
                    const charCode = message.charCodeAt(i) ^ key.charCodeAt(i % key.length);
                    encrypted.push(charCode.toString(16).padStart(2, '0'));
                }
                return encrypted.join('');
            },
            
            // –ó–∞—â–∏—â–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
            secureMessage: function(nodeId, message) {
                if (!message) {
                    this.addSystemMessage("–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è!");
                    return;
                }
                
                const key = this.generateQuantumKey();
                const keyString = key.bits.join('');
                const encrypted = this.encryptMessage(message, keyString);
                
                this.addMessage({
                    sender: "–°–∏—Å—Ç–µ–º–∞",
                    text: `–°–æ–æ–±—â–µ–Ω–∏–µ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ –∫–ª—é—á–æ–º BB84 (128 –±–∏—Ç)`,
                    isSystem: true
                });
                
                this.teleportMessage(nodeId, encrypted);
            },
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å
            showMarketplace: function() {
                if (this.marketplaceWindow) {
                    this.closeWindow(this.marketplaceWindow);
                }
                
                this.marketplaceWindow = this.createDynamicWindow(
                    "–ö–≤–∞–Ω—Ç–∫–æ–∏–Ω –ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å",
                    `
                    <div style="padding:15px;">
                        <h3 style="color:var(--quantum-gold); margin-top:0;">–¢–æ—Ä–≥–æ–≤–∞—è –ø–ª–æ—â–∞–¥–∫–∞</h3>
                        
                        <div style="background:rgba(0,0,30,0.5); padding:15px; border-radius:10px; margin-bottom:15px;">
                            <div style="font-size:1.2em; text-align:center;">
                                –í–∞—à –±–∞–ª–∞–Ω—Å: <span style="color:var(--quantum-gold);">${this.state.quantumCoins.toFixed(2)} QCoin</span>
                            </div>
                        </div>
                        
                        <div class="quantum-form">
                            <div class="form-title">–î–æ—Å—Ç—É–ø–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è</div>
                            
                            <div class="quantum-market-item" onclick="QuantumSystem.buyItem('speed')">
                                <div>‚ö° –£—Å–∫–æ—Ä–µ–Ω–∏–µ –ø–æ–∏—Å–∫–∞</div>
                                <div style="display:flex; justify-content:space-between; margin-top:5px;">
                                    <span>1.5 QCoin</span>
                                    <span>+30% —Å–∫–æ—Ä–æ—Å—Ç–∏</span>
                                </div>
                            </div>
                            
                            <div class="quantum-market-item" onclick="QuantumSystem.buyItem('nodes')">
                                <div>üåê –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–∑–ª—ã</div>
                                <div style="display:flex; justify-content:space-between; margin-top:5px;">
                                    <span>2.0 QCoin</span>
                                    <span>+3 —É–∑–ª–∞</span>
                                </div>
                            </div>
                            
                            <div class="quantum-market-item" onclick="QuantumSystem.buyItem('ai')">
                                <div>üß† –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç</div>
                                <div style="display:flex; justify-content:space-between; margin-top:5px;">
                                    <span>5.0 QCoin</span>
                                    <span>–ö–≤–∞–Ω—Ç–æ–≤—ã–π –ø–æ–º–æ—â–Ω–∏–∫</span>
                                </div>
                            </div>
                            
                            <div class="quantum-market-item" onclick="QuantumSystem.buyItem('evolution')">
                                <div>üöÄ –£—Å–∫–æ—Ä–µ–Ω–∏–µ —ç–≤–æ–ª—é—Ü–∏–∏</div>
                                <div style="display:flex; justify-content:space-between; margin-top:5px;">
                                    <span>3.0 QCoin</span>
                                    <span>+1 —É—Ä–æ–≤–µ–Ω—å</span>
                                </div>
                            </div>
                            
                            <div class="quantum-market-item" onclick="QuantumSystem.buyItem('neural')">
                                <div>üß† –ù–µ–π—Ä–æ—Å–µ—Ç–µ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è</div>
                                <div style="display:flex; justify-content:space-between; margin-top:5px;">
                                    <span>4.0 QCoin</span>
                                    <span>–ù–µ–π—Ä–æ–∫–≤–∞–Ω—Ç–æ–≤—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã</span>
                                </div>
                            </div>
                            
                            <div class="quantum-market-item" onclick="QuantumSystem.buyItem('encryption')">
                                <div>üîí –ö–≤–∞–Ω—Ç–æ–≤–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ</div>
                                <div style="display:flex; justify-content:space-between; margin-top:5px;">
                                    <span>3.5 QCoin</span>
                                    <span>256-–±–∏—Ç–Ω—ã–µ –∫–ª—é—á–∏</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    `
                );
            },
            
            // –ü–æ–∫—É–ø–∫–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
            buyItem: function(item) {
                const prices = {
                    'speed': 1.5,
                    'nodes': 2.0,
                    'ai': 5.0,
                    'evolution': 3.0,
                    'neural': 4.0,
                    'encryption': 3.5
                };
                
                if (this.state.quantumCoins >= prices[item]) {
                    this.state.quantumCoins -= prices[item];
                    this.state.features[item] = true;
                    this.updateCoinDisplay();
                    
                    let message = "";
                    switch(item) {
                        case 'speed':
                            clearInterval(this.state.autoProcesses.search.interval);
                            this.startAutoProcess('search');
                            message = "–ü–æ–∏—Å–∫ —É–∑–ª–æ–≤ —É—Å–∫–æ—Ä–µ–Ω –Ω–∞ 30%!";
                            break;
                        case 'nodes':
                            this.addRandomNodes(3);
                            message = "3 –Ω–æ–≤—ã—Ö —É–∑–ª–∞ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ —Å–µ—Ç—å!";
                            break;
                        case 'ai':
                            this.createAIAssistant();
                            message = "–ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω!";
                            break;
                        case 'evolution':
                            this.state.evolutionLevel++;
                            this.updateEvolutionDisplay();
                            message = `–£—Ä–æ–≤–µ–Ω—å —ç–≤–æ–ª—é—Ü–∏–∏ –ø–æ–≤—ã—à–µ–Ω –¥–æ ${this.state.evolutionLevel}!`;
                            break;
                        case 'neural':
                            message = "–ù–µ–π—Ä–æ—Å–µ—Ç–µ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞!";
                            this.initNeuralConnections();
                            break;
                        case 'encryption':
                            message = "–ö–≤–∞–Ω—Ç–æ–≤–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —É–ª—É—á—à–µ–Ω–æ –¥–æ 256 –±–∏—Ç!";
                            break;
                    }
                    
                    this.addTransaction('purchase', -prices[item], `–ü–æ–∫—É–ø–∫–∞: ${item}`);
                    
                    if (item !== 'ai') {
                        this.createDynamicWindow(
                            "–ü–æ–∫—É–ø–∫–∞ —É—Å–ø–µ—à–Ω–∞",
                            `
                            <div style="padding:20px; text-align:center;">
                                <h3 style="color:var(--quantum-gold);">${message}</h3>
                                <p>–°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–∫—É–ø–∫—É!</p>
                            </div>
                            `
                        );
                    }
                } else {
                    this.createDynamicWindow(
                        "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤",
                        `
                        <div style="padding:20px; text-align:center;">
                            <h3 style="color:var(--quantum-pink);">–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ QCoin</h3>
                            <p>–í–∞–º –Ω—É–∂–Ω–æ –µ—â–µ ${(prices[item] - this.state.quantumCoins).toFixed(2)} QCoin</p>
                        </div>
                        `
                    );
                }
            },
            
            // –°–æ–∑–¥–∞–Ω–∏–µ –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
            createAIAssistant: function() {
                if (this.aiWindow) {
                    this.closeWindow(this.aiWindow);
                }
                
                this.aiWindow = this.createDynamicWindow(
                    "–ö–≤–∞–Ω—Ç–æ–≤—ã–π –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç",
                    `
                    <div style="padding:15px;">
                        <div style="display:flex; align-items:center; margin-bottom:15px;">
                            <div style="width:40px; height:40px; background:var(--quantum-purple); border-radius:50%; display:flex; align-items:center; justify-content:center; margin-right:10px;">
                                <span style="font-size:1.5em;">üß†</span>
                            </div>
                            <div>
                                <h3 style="margin:0;">–ö–≤–∞–Ω—Ç–æ–≤—ã–π –ò–ò</h3>
                                <div style="font-size:0.8em;">–£—Ä–æ–≤–µ–Ω—å ${this.state.evolutionLevel}</div>
                            </div>
                        </div>
                        
                        <div id="ai-chat" style="height:200px; overflow-y:auto; margin-bottom:15px; border:1px solid var(--quantum-blue); border-radius:5px; padding:10px;">
                            <div class="ai-response">–ò–ò: –ü—Ä–∏–≤–µ—Ç! –Ø –≤–∞—à –∫–≤–∞–Ω—Ç–æ–≤—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç. –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?</div>
                        </div>
                        
                        <div style="display:flex;">
                            <input type="text" id="ai-message" placeholder="–í–∞—à –≤–æ–ø—Ä–æ—Å..." style="flex:1; padding:10px; background:rgba(0,0,0,0.5); border:1px solid var(--quantum-blue); border-radius:5px 0 0 5px; color:white;">
                            <button onclick="QuantumSystem.sendAIMessage('${this.aiWindow}')" style="border-radius:0 5px 5px 0;">‚û§</button>
                        </div>
                    </div>
                    `
                );
            },
            
            // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –ò–ò
            sendAIMessage: function(windowId) {
                const input = document.querySelector(`#${windowId} #ai-message`);
                const message = input.value;
                const chat = document.querySelector(`#${windowId} #ai-chat`);
                
                if (message.trim() === "") return;
                
                // –°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                chat.innerHTML += `
                    <div style="text-align:right; margin:10px 0; color:var(--quantum-pink);">
                        –í—ã: ${message}
                    </div>
                `;
                
                input.value = "";
                chat.scrollTop = chat.scrollHeight;
                
                // –ò–ò "–¥—É–º–∞–µ—Ç"
                setTimeout(() => {
                    const responses = [
                        `–ö–≤–∞–Ω—Ç–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑: "${message.substring(0, Math.min(message.length, 10))}..."`,
                        `–°—É–ø–µ—Ä–ø–æ–∑–∏—Ü–∏—è –æ—Ç–≤–µ—Ç–∞: ${Math.random() > 0.5 ? '–î–ê' : '–ù–ï–¢'}`,
                        `–ù–∞ —É—Ä–æ–≤–Ω–µ ${this.state.evolutionLevel} —è –º–æ–≥—É —Å–∫–∞–∑–∞—Ç—å...`,
                        "–ó–∞–ø—É—Ç–∞–Ω–Ω—ã–µ –∫—É–±–∏—Ç—ã —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç",
                        "–ö–æ–ª–ª–∞–ø—Å –≤–æ–ª–Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –¥–∞–µ—Ç —ç—Ç–æ—Ç –æ—Ç–≤–µ—Ç",
                        "–ù–µ–π—Ä–æ—Å–µ—Ç—å –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç...",
                        "–ö–≤–∞–Ω—Ç–æ–≤—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω—ã",
                        "–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞: 87.3%"
                    ];
                    
                    const randomResponse = responses[
                        Math.floor(Math.random() * responses.length)
                    ];
                    
                    chat.innerHTML += `
                        <div class="ai-response">–ò–ò: ${randomResponse}</div>
                    `;
                    
                    chat.scrollTop = chat.scrollHeight;
                    
                    // –ù–∞–≥—Ä–∞–¥–∞ –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ò–ò
                    this.addCoins(0.2);
                }, 1000 + Math.random() * 2000);
            },
            
            // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            showUserRegistration: function() {
                if (this.userWindow) {
                    this.closeWindow(this.userWindow);
                    return;
                }
                
                if (this.state.user.registered) {
                    this.showUserProfile();
                    return;
                }
                
                this.userWindow = this.createDynamicWindow(
                    "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ –∫–≤–∞–Ω—Ç–æ–≤–æ–π —Å–µ—Ç–∏",
                    `
                    <div style="padding:15px;">
                        <h3 style="color:var(--quantum-gold); margin-top:0;">–°–æ–∑–¥–∞–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞</h3>
                        
                        <div class="user-register-form">
                            <input type="email" id="user-email" placeholder="–í–∞—à email" style="width:100%;">
                            <button onclick="QuantumSystem.registerUser()" style="width:100%; margin-top:10px;">
                                –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
                            </button>
                        </div>
                        
                        <div style="font-size:0.8em; color:var(--quantum-blue); margin-top:10px;">
                            –ü–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–≤–∞–Ω—Ç–æ–≤—ã–π ID
                        </div>
                    </div>
                    `
                );
            },
            
            // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            registerUser: function() {
                const emailInput = document.getElementById('user-email');
                const email = emailInput.value.trim();
                
                if (!email.includes('@') || !email.includes('.')) {
                    this.addSystemMessage("–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email!");
                    return;
                }
                
                const userId = `user-${CryptoJS.SHA256(email + Date.now()).toString().substr(0, 12)}`;
                
                this.state.user = {
                    registered: true,
                    email,
                    id: userId,
                    joinDate: new Date(),
                    transactions: []
                };
                
                this.updateUserDisplay();
                this.addSystemMessage(`–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ${email} –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω! ID: ${userId}`);
                this.addCoins(2.0);
                this.addTransaction('reward', 2.0, '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ —Å–∏—Å—Ç–µ–º–µ');
                
                if (this.userWindow) {
                    this.closeWindow(this.userWindow);
                    this.showUserProfile();
                }
            },
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            showUserProfile: function() {
                this.userWindow = this.createDynamicWindow(
                    "–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
                    `
                    <div style="padding:15px;">
                        <h3 style="color:var(--quantum-gold); margin-top:0;">${this.state.user.email}</h3>
                        
                        <div style="background:rgba(0,0,30,0.5); padding:15px; border-radius:10px; margin-bottom:15px;">
                            <div>ID: ${this.state.user.id}</div>
                            <div>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏: ${this.state.user.joinDate.toLocaleString()}</div>
                            <div>–£—Ä–æ–≤–µ–Ω—å: ${this.state.evolutionLevel}</div>
                        </div>
                        
                        <button onclick="QuantumSystem.showTransactionHistory()" style="width:100%;">
                            –ü–æ–∫–∞–∑–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
                        </button>
                    </div>
                    `
                );
            },
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
            showTransactionHistory: function() {
                if (this.transactionWindow) {
                    this.closeWindow(this.transactionWindow);
                    return;
                }
                
                this.transactionWindow = this.createDynamicWindow(
                    "–ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π",
                    `
                    <div style="padding:15px;">
                        <h3 style="color:var(--quantum-gold); margin-top:0;">–í—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏</h3>
                        
                        <div style="background:rgba(0,0,30,0.5); padding:15px; border-radius:10px; margin-bottom:15px; text-align:center;">
                            <div style="font-size:1.2em;">
                                –ë–∞–ª–∞–Ω—Å: <span style="color:var(--quantum-gold);">${this.state.quantumCoins.toFixed(2)} QCoin</span>
                            </div>
                        </div>
                        
                        <div class="transaction-history" id="transaction-history-list">
                            ${this.state.user.transactions.map(tx => `
                                <div class="transaction-item">
                                    <div style="display:flex; justify-content:space-between;">
                                        <span>${tx.description}</span>
                                        <span style="color:${tx.amount > 0 ? 'var(--quantum-green)' : 'var(--quantum-pink)'}">
                                            ${tx.amount > 0 ? '+' : ''}${tx.amount.toFixed(2)} QCoin
                                        </span>
                                    </div>
                                    <div style="font-size:0.7em; color:var(--quantum-blue);">
                                        ${tx.timestamp.toLocaleString()}
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    `
                );
            },
            
            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
            addTransaction: function(type, amount, description) {
                if (!this.state.user.registered) return;
                
                const tx = {
                    id: `tx-${Date.now()}`,
                    type,
                    amount,
                    balance: this.state.quantumCoins,
                    timestamp: new Date(),
                    description
                };
                
                this.state.user.transactions.push(tx);
                this.updateTransactionDisplay();
            },
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
            updateTransactionDisplay: function() {
                document.getElementById('transactions-count').textContent = this.state.user.transactions.length;
                
                if (this.transactionWindow) {
                    const list = document.getElementById('transaction-history-list');
                    if (list) {
                        list.innerHTML = this.state.user.transactions.map(tx => `
                            <div class="transaction-item">
                                <div style="display:flex; justify-content:space-between;">
                                    <span>${tx.description}</span>
                                    <span style="color:${tx.amount > 0 ? 'var(--quantum-green)' : 'var(--quantum-pink)'}">
                                        ${tx.amount > 0 ? '+' : ''}${tx.amount.toFixed(2)} QCoin
                                    </span>
                                </div>
                                <div style="font-size:0.7em; color:var(--quantum-blue);">
                                    ${tx.timestamp.toLocaleString()}
                                </div>
                            </div>
                        `).join('');
                    }
                }
            },
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            updateUserDisplay: function() {
                document.getElementById('user-id').textContent = this.state.user.registered 
                    ? this.state.user.id.substr(0, 8) + '...' 
                    : '–ù–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω';
            },
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –º–∞—Ç—Ä–∏—Ü—É —Å–µ—Ç–∏
            showMatrixView: function() {
                if (this.matrixWindow) {
                    this.closeWindow(this.matrixWindow);
                    return;
                }
                
                this.matrixWindow = this.createDynamicWindow(
                    "–ú–∞—Ç—Ä–∏—Ü–∞ –∫–≤–∞–Ω—Ç–æ–≤–æ–π —Å–µ—Ç–∏",
                    `
                    <div style="padding:15px;">
                        <h3 style="color:var(--quantum-gold); margin-top:0;">–¢–æ–ø–æ–ª–æ–≥–∏—è —Å–µ—Ç–∏</h3>
                        <div>–í—Å–µ–≥–æ —É–∑–ª–æ–≤: ${this.state.discoveredNodes.length}</div>
                        <div>–ó–∞–ø—É—Ç–∞–Ω–Ω—ã—Ö –ø–∞—Ä: ${this.state.entangledNodes.length}</div>
                        
                        <div class="matrix-grid" id="matrix-grid">
                            ${this.state.matrixView.map(node => `
                                <div class="matrix-cell">
                                    <div>${node.name}</div>
                                    <div style="font-size:0.8em;">${node.connections} —Å–æ–µ–¥–∏–Ω.</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    `
                );
            },
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞—Ç—Ä–∏—Ü—ã —Å–µ—Ç–∏
            updateMatrixView: function() {
                this.state.matrixView = this.state.discoveredNodes.map(node => {
                    const connections = this.state.entangledNodes.filter(id => id === node.id).length;
                    return {
                        id: node.id,
                        name: node.name,
                        connections
                    };
                }).sort((a, b) => b.connections - a.connections);
                
                if (this.matrixWindow) {
                    const grid = document.getElementById('matrix-grid');
                    if (grid) {
                        grid.innerHTML = this.state.matrixView.map(node => `
                            <div class="matrix-cell">
                                <div>${node.name}</div>
                                <div style="font-size:0.8em;">${node.connections} —Å–æ–µ–¥–∏–Ω.</div>
                            </div>
                        `).join('');
                    }
                }
            },
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –Ω–µ–π—Ä–æ—Å–µ—Ç—å
            showNeuralNetwork: function() {
                if (!this.state.features.neural) {
                    this.addSystemMessage("–¢—Ä–µ–±—É–µ—Ç—Å—è —É–ª—É—á—à–µ–Ω–∏–µ '–ù–µ–π—Ä–æ—Å–µ—Ç–µ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è'!");
                    return;
                }
                
                if (this.neuralWindow) {
                    this.closeWindow(this.neuralWindow);
                    return;
                }
                
                this.neuralWindow = this.createDynamicWindow(
                    "–ù–µ–π—Ä–æ–∫–≤–∞–Ω—Ç–æ–≤–∞—è —Å–µ—Ç—å",
                    `
                    <div style="padding:15px;">
                        <h3 style="color:var(--quantum-gold); margin-top:0;">–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏</h3>
                        
                        <div style="background:rgba(0,0,30,0.5); padding:15px; border-radius:10px; margin-bottom:15px;">
                            <div>–£—Ä–æ–≤–µ–Ω—å: ${this.state.evolutionLevel}</div>
                            <div>–ù–µ–π—Ä–æ–Ω–æ–≤: ${this.state.neuralConnections.length}</div>
                            <div>–°–≤—è–∑–µ–π: ${this.state.neuralConnections.reduce((sum, n) => sum + n.connections.length, 0)}</div>
                        </div>
                        
                        <div class="neural-connection" id="neural-window-connection" style="height:150px;"></div>
                        
                        <button onclick="QuantumSystem.optimizeNeuralConnections()" style="width:100%; margin-top:15px;">
                            –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–≤—è–∑–∏
                        </button>
                    </div>
                    `
                );
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–µ–π—Ä–æ–Ω–Ω—ã—Ö —Å–≤—è–∑–µ–π –≤ –æ–∫–Ω–µ
                const container = document.getElementById('neural-window-connection');
                container.innerHTML = '';
                
                this.state.neuralConnections.forEach(neuron => {
                    const node = document.createElement('div');
                    node.className = 'neural-node';
                    node.style.left = `${neuron.x}%`;
                    node.style.top = `${neuron.y}%`;
                    container.appendChild(node);
                });
                
                this.state.neuralConnections.forEach((neuron, i) => {
                    neuron.connections.forEach(connIdx => {
                        const fromEl = container.children[i];
                        const toEl = container.children[connIdx];
                        
                        const fromRect = fromEl.getBoundingClientRect();
                        const toRect = toEl.getBoundingClientRect();
                        
                        const containerRect = container.getBoundingClientRect();
                        
                        const fromX = fromRect.left + fromRect.width/2 - containerRect.left;
                        const fromY = fromRect.top + fromRect.height/2 - containerRect.top;
                        const toX = toRect.left + toRect.width/2 - containerRect.left;
                        const toY = toRect.top + toRect.height/2 - containerRect.top;
                        
                        const length = Math.sqrt(Math.pow(toX - fromX, 2) + Math.pow(toY - fromY, 2));
                        const angle = Math.atan2(toY - fromY, toX - fromX) * 180 / Math.PI;
                        
                        const line = document.createElement('div');
                        line.className = 'neural-line';
                        line.style.width = `${length}px`;
                        line.style.left = `${fromX}px`;
                        line.style.top = `${fromY}px`;
                        line.style.transform = `rotate(${angle}deg)`;
                        line.style.opacity = 0.5 + Math.random() * 0.5;
                        
                        container.appendChild(line);
                    });
                });
            },
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –∫–≤–∞–Ω—Ç–æ–≤—É—é –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—é
            showQuantumLab: function() {
                if (this.labWindow) {
                    this.closeWindow(this.labWindow);
                    return;
                }
                
                this.labWindow = this.createDynamicWindow(
                    "–ö–≤–∞–Ω—Ç–æ–≤–∞—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è",
                    `
                    <div style="padding:15px;">
                        <h3 style="color:var(--quantum-gold); margin-top:0;">–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã</h3>
                        
                        <div style="background:rgba(0,0,30,0.5); padding:15px; border-radius:10px; margin-bottom:15px;">
                            <div>–í—Å–µ–≥–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤: ${this.state.experiments.length}</div>
                            <div>–ü–æ—Å–ª–µ–¥–Ω–∏–π: ${this.state.experiments.length > 0 ? this.state.experiments[this.state.experiments.length-1].name : '–Ω–µ—Ç'}</div>
                        </div>
                        
                        <div class="quantum-grid">
                            <div class="quantum-card" onclick="QuantumSystem.runExperiment('superposition')">
                                <div>–°—É–ø–µ—Ä–ø–æ–∑–∏—Ü–∏—è</div>
                                <div style="font-size:0.8em;">–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π</div>
                            </div>
                            
                            <div class="quantum-card" onclick="QuantumSystem.runExperiment('entanglement')">
                                <div>–ó–∞–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç—å</div>
                                <div style="font-size:0.8em;">–ö–≤–∞–Ω—Ç–æ–≤–∞—è –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è</div>
                            </div>
                            
                            <div class="quantum-card" onclick="QuantumSystem.runExperiment('teleportation')">
                                <div>–¢–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è</div>
                                <div style="font-size:0.8em;">–ü–µ—Ä–µ–¥–∞—á–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π</div>
                            </div>
                        </div>
                    </div>
                    `
                );
            },
            
            // –ü—Ä–æ–≤–µ–¥–µ–Ω–∏–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞
            runExperiment: function(type) {
                let name = "";
                let cost = 0;
                let reward = 0;
                
                switch(type) {
                    case 'superposition':
                        name = "–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Å—É–ø–µ—Ä–ø–æ–∑–∏—Ü–∏–∏";
                        cost = 1.0;
                        reward = 1.5;
                        this.superpositionEffect();
                        break;
                    case 'entanglement':
                        name = "–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∑–∞–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç–∏";
                        cost = 1.5;
                        reward = 2.0;
                        this.entanglementEffect();
                        break;
                    case 'teleportation':
                        name = "–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç –ø–æ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏";
                        cost = 2.0;
                        reward = 3.0;
                        if (this.state.entangledNodes.length > 0) {
                            this.teleportMessage(
                                this.state.entangledNodes[0], 
                                "–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞"
                            );
                        }
                        break;
                }
                
                if (this.state.quantumCoins < cost) {
                    this.addSystemMessage(`–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ QCoin –¥–ª—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞ "${name}"`);
                    return;
                }
                
                this.state.quantumCoins -= cost;
                this.updateCoinDisplay();
                
                setTimeout(() => {
                    this.state.quantumCoins += reward;
                    this.updateCoinDisplay();
                    this.addSystemMessage(`–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç "${name}" –∑–∞–≤–µ—Ä—à–µ–Ω! –ù–∞–≥—Ä–∞–¥–∞: ${reward} QCoin`);
                    
                    this.state.experiments.push({
                        name,
                        timestamp: new Date(),
                        cost,
                        reward
                    });
                    
                    document.getElementById('experiments-count').textContent = this.state.experiments.length;
                }, 3000 + Math.random() * 4000);
            },
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É
            showAnalytics: function() {
                if (this.analyticsWindow) {
                    this.closeWindow(this.analyticsWindow);
                    return;
                }
                
                this.analyticsWindow = this.createDynamicWindow(
                    "–ö–≤–∞–Ω—Ç–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞",
                    `
                    <div style="padding:15px;">
                        <h3 style="color:var(--quantum-gold); margin-top:0;">–ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö</h3>
                        
                        <div style="background:rgba(0,0,30,0.5); padding:15px; border-radius:10px; margin-bottom:15px;">
                            <div>–í—Å–µ–≥–æ –¥–∞–Ω–Ω—ã—Ö: ${(this.state.analyticsData.length * 0.1).toFixed(1)} –¢–ë</div>
                            <div>–ü–æ—Å–ª–µ–¥–Ω–∏–π –∞–Ω–∞–ª–∏–∑: ${new Date().toLocaleString()}</div>
                        </div>
                        
                        <div class="quantum-chart">
                            <canvas id="analytics-chart"></canvas>
                        </div>
                        
                        <button onclick="QuantumSystem.runDataAnalysis()" style="width:100%; margin-top:15px;">
                            –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–Ω–∞–ª–∏–∑
                        </button>
                    </div>
                    `
                );
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∏–∫–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
                const ctx = document.getElementById('analytics-chart').getContext('2d');
                new Chart(ctx, {
                    type: 'pie',
                    data: {
                        labels: ['–£–∑–ª—ã', '–°–æ–æ–±—â–µ–Ω–∏—è', '–ó–∞–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç—å', '–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏'],
                        datasets: [{
                            data: [
                                this.state.discoveredNodes.length,
                                this.state.messages.length,
                                this.state.entangledNodes.length,
                                this.state.user.transactions.length
                            ],
                            backgroundColor: [
                                'rgba(0, 255, 255, 0.7)',
                                'rgba(255, 0, 170, 0.7)',
                                'rgba(157, 0, 255, 0.7)',
                                'rgba(255, 215, 0, 0.7)'
                            ],
                            borderColor: [
                                'rgba(0, 255, 255, 1)',
                                'rgba(255, 0, 170, 1)',
                                'rgba(157, 0, 255, 1)',
                                'rgba(255, 215, 0, 1)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        plugins: {
                            legend: {
                                labels: {
                                    color: 'white'
                                }
                            }
                        }
                    }
                });
            },
            
            // –ó–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö
            runDataAnalysis: function() {
                if (!this.analyticsWindow) return;
                
                const analysisTime = 2000 + Math.random() * 3000;
                const btn = document.querySelector(`#${this.analyticsWindow} button`);
                btn.textContent = "–ê–Ω–∞–ª–∏–∑...";
                btn.disabled = true;
                
                setTimeout(() => {
                    btn.textContent = "–ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–Ω–∞–ª–∏–∑";
                    btn.disabled = false;
                    
                    const insights = [
                        "–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã",
                        "–í—ã—è–≤–ª–µ–Ω—ã –ø–∞—Ç—Ç–µ—Ä–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π",
                        "–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ç–∏",
                        "–ù–∞–π–¥–µ–Ω—ã –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ —É–∑–ª—ã",
                        "–ü—Ä–µ–¥–ª–æ–∂–µ–Ω—ã —É–ª—É—á—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏"
                    ];
                    
                    this.state.analyticsData.push({
                        timestamp: new Date(),
                        insight: insights[Math.floor(Math.random() * insights.length)]
                    });
                    
                    document.getElementById('analytics-data').textContent = 
                        (this.state.analyticsData.length * 0.1).toFixed(1);
                    
                    this.addSystemMessage(`–ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö –∑–∞–≤–µ—Ä—à–µ–Ω: ${this.state.analyticsData[this.state.analyticsData.length-1].insight}`);
                    this.addCoins(0.8);
                }, analysisTime);
            },
            
            // –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –æ–∫–Ω–∞
            createDynamicWindow: function(title, content) {
                const windowId = `window-${Math.random().toString(36).substr(2, 9)}`;
                const offset = this.state.dynamicWindows.length * 30;
                
                const windowElement = document.createElement('div');
                windowElement.className = 'dynamic-window';
                windowElement.id = windowId;
                windowElement.style.left = `${100 + offset}px`;
                windowElement.style.top = `${100 + offset}px`;
                
                windowElement.innerHTML = `
                    <div class="window-header">
                        <div>${title}</div>
                        <button class="close-window" onclick="QuantumSystem.closeWindow('${windowId}')">‚úï</button>
                    </div>
                    <div class="window-content" style="padding:15px;">
                        ${content}
                    </div>
                `;
                
                document.body.appendChild(windowElement);
                this.state.dynamicWindows.push(windowId);
                
                // –î–µ–ª–∞–µ–º –æ–∫–Ω–æ –ø–µ—Ä–µ–º–µ—â–∞–µ–º—ã–º
                this.makeWindowDraggable(windowId);
                
                return windowId;
            },
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –æ–∫–Ω–∞
            closeWindow: function(windowId) {
                const windowElement = document.getElementById(windowId);
                if (windowElement) {
                    windowElement.remove();
                    this.state.dynamicWindows = this.state.dynamicWindows.filter(id => id !== windowId);
                    
                    // –ù–∞–≥—Ä–∞–¥–∞ –∑–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ
                    this.addCoins(0.1);
                }
                
                if (this.aiWindow === windowId) {
                    this.aiWindow = null;
                }
                
                if (this.marketplaceWindow === windowId) {
                    this.marketplaceWindow = null;
                }
                
                if (this.userWindow === windowId) {
                    this.userWindow = null;
                }
                
                if (this.transactionWindow === windowId) {
                    this.transactionWindow = null;
                }
                
                if (this.matrixWindow === windowId) {
                    this.matrixWindow = null;
                }
                
                if (this.neuralWindow === windowId) {
                    this.neuralWindow = null;
                }
                
                if (this.labWindow === windowId) {
                    this.labWindow = null;
                }
                
                if (this.analyticsWindow === windowId) {
                    this.analyticsWindow = null;
                }
            },
            
            // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –æ–∫–æ–Ω
            makeWindowDraggable: function(windowId) {
                const windowElement = document.getElementById(windowId);
                const header = windowElement.querySelector('.window-header');
                
                let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
                
                header.onmousedown = dragMouseDown;
                
                function dragMouseDown(e) {
                    e = e || window.event;
                    e.preventDefault();
                    pos3 = e.clientX;
                    pos4 = e.clientY;
                    document.onmouseup = closeDragElement;
                    document.onmousemove = elementDrag;
                }
                
                function elementDrag(e) {
                    e = e || window.event;
                    e.preventDefault();
                    pos1 = pos3 - e.clientX;
                    pos2 = pos4 - e.clientY;
                    pos3 = e.clientX;
                    pos4 = e.clientY;
                    windowElement.style.top = (windowElement.offsetTop - pos2) + "px";
                    windowElement.style.left = (windowElement.offsetLeft - pos1) + "px";
                }
                
                function closeDragElement() {
                    document.onmouseup = null;
                    document.onmousemove = null;
                }
            },
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            initUserTracking: function() {
                // –ê–Ω–∞–ª–∏–∑ –∫–ª–∏–∫–æ–≤
                document.addEventListener('click', (e) => {
                    if (e.target.tagName !== 'BUTTON' && e.target.className !== 'quantum-node') {
                        this.learnFromInteraction('click');
                        this.addCoins(0.01);
                    }
                });
                
                // –ê–Ω–∞–ª–∏–∑ –≤–∫–ª–∞–¥–æ–∫
                document.querySelectorAll('.tab').forEach(tab => {
                    tab.addEventListener('click', () => {
                        this.learnFromInteraction(`tab_${tab.dataset.tab}`);
                        this.addCoins(0.1);
                    });
                });
                
                // –ê–Ω–∞–ª–∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫
                document.getElementById('interface-theme').addEventListener('change', (e) => {
                    this.state.theme = e.target.value;
                    this.applyTheme();
                    this.addSystemMessage(`–¢–µ–º–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∏–∑–º–µ–Ω–µ–Ω–∞ –Ω–∞ ${e.target.value}`);
                });
            },
            
            // –û–±—É—á–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π
            learnFromInteraction: function(action) {
                if (!this.state.learnedPatterns[action]) {
                    this.state.learnedPatterns[action] = 0;
                }
                this.state.learnedPatterns[action]++;
                
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–∏ —á–∞—Å—Ç—ã—Ö –¥–µ–π—Å—Ç–≤–∏—è—Ö
                if (this.state.learnedPatterns[action] % 20 === 0) {
                    this.addSystemMessage(`–û–±–Ω–∞—Ä—É–∂–µ–Ω –ø–∞—Ç—Ç–µ—Ä–Ω: ${action.replace(/_/g, ' ')}`);
                    this.addCoins(0.5);
                }
            },
            
            // –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –æ–±—É—á–µ–Ω–∏—è
            showLearningStats: function() {
                const stats = Object.entries(this.state.learnedPatterns)
                    .map(([action, count]) => ({ action, count }))
                    .sort((a, b) => b.count - a.count);
                
                const statsWindow = this.createDynamicWindow(
                    "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±—É—á–µ–Ω–∏—è",
                    `
                    <div style="padding:15px;">
                        <h3 style="color:var(--quantum-gold); margin-top:0;">–ü–∞—Ç—Ç–µ—Ä–Ω—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è</h3>
                        
                        <div style="margin-bottom:15px;">
                            <div>–£—Ä–æ–≤–µ–Ω—å —ç–≤–æ–ª—é—Ü–∏–∏: ${this.state.evolutionLevel}</div>
                            <div>–í—Å–µ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π: ${stats.reduce((sum, stat) => sum + stat.count, 0)}</div>
                        </div>
                        
                        <div style="max-height:300px; overflow-y:auto;">
                            ${stats.map(stat => `
                                <div style="display:flex; justify-content:space-between; padding:5px; border-bottom:1px solid rgba(0,255,255,0.2);">
                                    <span>${stat.action.replace(/_/g, ' ')}</span>
                                    <span>${stat.count}</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    `
                );
            },
            
            // –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –æ–±—É—á–µ–Ω–∏—è
            exportLearningData: function() {
                const dataStr = JSON.stringify(this.state.learnedPatterns, null, 2);
                const blob = new Blob([dataStr], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = `quantum-learning-${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                this.addSystemMessage("–î–∞–Ω–Ω—ã–µ –æ–±—É—á–µ–Ω–∏—è —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã");
                this.addCoins(0.3);
            },
            
            // –°–±—Ä–æ—Å –Ω–∞—Å—Ç—Ä–æ–µ–∫
            resetSettings: function() {
                if (confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏?")) {
                    localStorage.removeItem('quantum-theme');
                    document.getElementById('node-name').value = "–ù–µ–π—Ä–æ–∫–≤–∞–Ω—Ç–æ–≤—ã–π –£–∑–µ–ª";
                    document.getElementById('search-sensitivity').value = "medium";
                    document.getElementById('auto-entangle').value = "on";
                    document.getElementById('interface-theme').value = "quantum";
                    
                    this.state.theme = 'quantum';
                    this.applyTheme();
                    
                    this.addSystemMessage("–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–±—Ä–æ—à–µ–Ω—ã –∫ –∑–Ω–∞—á–µ–Ω–∏—è–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é");
                    this.addCoins(0.2);
                }
            },
            
            // –°–æ–∑–¥–∞–Ω–∏–µ –æ–∫–Ω–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É–∑–ª–æ–º
            createNodeWindow: function(nodeId) {
                const node = this.state.discoveredNodes.find(n => n.id === nodeId);
                if (!node) {
                    this.addSystemMessage("–í—ã–±–µ—Ä–∏—Ç–µ —É–∑–µ–ª –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è!");
                    return;
                }
                
                const windowId = this.createDynamicWindow(
                    `–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É–∑–ª–æ–º: ${node.name}`,
                    `
                    <div style="padding:15px;">
                        <h3 style="color:var(--quantum-gold); margin-top:0;">${node.name}</h3>
                        
                        <div style="background:rgba(0,0,30,0.5); padding:15px; border-radius:10px; margin-bottom:15px;">
                            <div>ID: ${node.id}</div>
                            <div>–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ: ${node.distance}</div>
                            <div>–°–æ—Å—Ç–æ—è–Ω–∏–µ: ${node.state.alpha}|0‚ü© + ${node.state.beta}|1‚ü©</div>
                            <div>–ó–∞–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç—å: ${this.state.entangledNodes.includes(node.id) ? '‚úÖ' : '‚ùå'}</div>
                        </div>
                        
                        <button onclick="QuantumSystem.createEntanglement('${node.id}')" style="width:100%; margin-bottom:10px;">
                            ${this.state.entangledNodes.includes(node.id) ? '–û–±–Ω–æ–≤–∏—Ç—å –∑–∞–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç—å' : '–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç—å'}
                        </button>
                        
                        <div style="display:flex;">
                            <input type="text" id="message-to-${node.id}" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è —É–∑–ª–∞" style="flex:1; padding:10px; background:rgba(0,0,0,0.5); border:1px solid var(--quantum-blue); border-radius:5px 0 0 5px; color:white;">
                            <button onclick="QuantumSystem.teleportMessage('${node.id}', document.getElementById('message-to-${node.id}').value)" style="border-radius:0 5px 5px 0;">‚û§</button>
                        </div>
                    </div>
                    `
                );
            }
        };
        
        // =============================================
        // –ì–õ–û–ë–ê–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò
        // =============================================
        function showTab(tabName) {
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // –î–µ–∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤—Å–µ –∫–Ω–æ–ø–∫–∏ –≤–∫–ª–∞–¥–æ–∫
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
            document.getElementById(`${tabName}-tab`).classList.add('active');
            
            // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É
            document.querySelector(`.tab[data-tab="${tabName}"]`).classList.add('active');
            
            // –ù–∞–≥—Ä–∞–¥–∞ –∑–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
            QuantumSystem.addCoins(0.1);
        }
        
        function switchQuantumTab(tabName) {
            document.querySelectorAll('.quantum-tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.querySelectorAll('.quantum-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById(`${tabName}-tab`).classList.add('active');
            document.querySelector(`.quantum-tab[onclick*="${tabName}"]`).classList.add('active');
        }
        
        function switchMessageTab(tabName) {
            const incoming = document.getElementById('incoming-messages');
            incoming.innerHTML = '';
            
            QuantumSystem.state.messages.forEach(msg => {
                if (tabName === 'all' || 
                    (tabName === 'system' && msg.isSystem) || 
                    (tabName === 'teleported' && msg.isTeleported)) {
                    
                    const msgElement = document.createElement('div');
                    msgElement.className = 'quantum-node';
                    msgElement.style.margin = '10px 0';
                    msgElement.style.padding = '10px';
                    
                    if (msg.isSystem) {
                        msgElement.style.borderLeft = '3px solid var(--quantum-gold)';
                        msgElement.innerHTML = `<div><em>${msg.text}</em></div>`;
                    } else if (msg.isTeleported) {
                        msgElement.style.borderLeft = '3px solid var(--quantum-pink)';
                        msgElement.innerHTML = `
                            <div><strong>${msg.sender}</strong></div>
                            <div>${msg.text}</div>
                            <div style="font-size: 0.8em; color: var(--quantum-blue)">–ö–≤–∞–Ω—Ç–æ–≤–∞—è —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è</div>
                        `;
                    } else {
                        msgElement.innerHTML = `
                            <div><strong>${msg.sender}</strong></div>
                            <div>${msg.text}</div>
                        `;
                    }
                    
                    incoming.appendChild(msgElement);
                }
            });
            
            document.querySelectorAll('.quantum-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.querySelector(`.quantum-tab[onclick*="${tabName}"]`).classList.add('active');
        }
        
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'flex';
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }
        
        function measureQuantumState() {
            const result = QuantumSystem.measure();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
            document.getElementById('measurement-result').textContent = `–†–µ–∑—É–ª—å—Ç–∞—Ç: ${result}`;
            
            // –°–æ–∑–¥–∞–µ–º –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é —ç—Ñ—Ñ–µ–∫—Ç–∞
            const effectDiv = document.getElementById('measurement-effect');
            effectDiv.innerHTML = '';
            
            const canvas = document.createElement('canvas');
            canvas.width = effectDiv.offsetWidth;
            canvas.height = effectDiv.offsetHeight;
            effectDiv.appendChild(canvas);
            
            const ctx = canvas.getContext('2d');
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            
            if (result === '|0‚ü©') {
                // –°–∏–Ω–∏–π –≤–∑—Ä—ã–≤
                for (let i = 0; i < 100; i++) {
                    const angle = Math.random() * Math.PI * 2;
                    const distance = Math.random() * 100;
                    
                    ctx.beginPath();
                    ctx.arc(
                        centerX + Math.cos(angle) * distance,
                        centerY + Math.sin(angle) * distance,
                        2,
                        0,
                        Math.PI * 2
                    );
                    ctx.fillStyle = `rgba(0, 255, 255, ${1 - distance/100})`;
                    ctx.fill();
                }
            } else {
                // –†–æ–∑–æ–≤—ã–π –≤–∑—Ä—ã–≤
                for (let i = 0; i < 100; i++) {
                    const angle = Math.random() * Math.PI * 2;
                    const distance = Math.random() * 100;
                    
                    ctx.beginPath();
                    ctx.arc(
                        centerX + Math.cos(angle) * distance,
                        centerY + Math.sin(angle) * distance,
                        2,
                        0,
                        Math.PI * 2
                    );
                    ctx.fillStyle = `rgba(255, 0, 170, ${1 - distance/100})`;
                    ctx.fill();
                }
            }
            
            openModal('measurement-modal');
            
            // –ù–∞–≥—Ä–∞–¥–∞ –∑–∞ –∏–∑–º–µ—Ä–µ–Ω–∏–µ
            QuantumSystem.addCoins(0.5);
        }
        
        function startQuantumSearch() {
            QuantumSystem.quantumSearchNodes();
        }
        
        function refreshNodes() {
            document.getElementById('nodes-list').innerHTML = '<div style="text-align: center;">–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ...</div>';
            setTimeout(() => {
                QuantumSystem.updateNodesDisplay();
            }, 1000);
            
            // –ù–∞–≥—Ä–∞–¥–∞ –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
            QuantumSystem.addCoins(0.1);
        }
        
        function connectToNode() {
            const select = document.getElementById('node-select');
            const nodeId = select.value;
            
            if (nodeId) {
                QuantumSystem.createEntanglement(nodeId);
            } else {
                QuantumSystem.addSystemMessage("–í—ã–±–µ—Ä–∏—Ç–µ —É–∑–µ–ª –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è!");
            }
        }
        
        function teleportMessage() {
            const select = document.getElementById('entangled-node-select');
            const nodeId = select.value;
            const message = document.getElementById('quantum-message').value;
            
            if (nodeId && message) {
                QuantumSystem.teleportMessage(nodeId, message);
                document.getElementById('quantum-message').value = '';
            } else {
                QuantumSystem.addSystemMessage("–í—ã–±–µ—Ä–∏—Ç–µ –∑–∞–ø—É—Ç–∞–Ω–Ω—ã–π —É–∑–µ–ª –∏ –≤–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ!");
            }
        }
        
        function sendQuantumMessage() {
            const select = document.getElementById('message-node-select');
            const nodeId = select.value;
            const message = document.getElementById('message-text').value;
            
            if (nodeId && message) {
                QuantumSystem.addMessage({
                    sender: `–í—ã ‚Üí ${QuantumSystem.state.discoveredNodes.find(n => n.id === nodeId).name}`,
                    text: message
                });
                
                // –°–∏–º—É–ª–∏—Ä—É–µ–º –æ—Ç–≤–µ—Ç
                setTimeout(() => {
                    QuantumSystem.addMessage({
                        sender: `${QuantumSystem.state.discoveredNodes.find(n => n.id === nodeId).name} ‚Üí –í—ã`,
                        text: QuantumSystem.generateQuantumResponse(message)
                    });
                }, 1000 + Math.random() * 2000);
                
                document.getElementById('message-text').value = '';
                
                // –ù–∞–≥—Ä–∞–¥–∞ –∑–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ
                QuantumSystem.addCoins(0.3);
            } else {
                QuantumSystem.addSystemMessage("–í—ã–±–µ—Ä–∏—Ç–µ —É–∑–µ–ª –∏ –≤–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ!");
            }
        }
        
        function saveSettings() {
            const nodeName = document.getElementById('node-name').value;
            QuantumSystem.addSystemMessage(`–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã! –ò–º—è —É–∑–ª–∞: ${nodeName}`);
            
            // –ù–∞–≥—Ä–∞–¥–∞ –∑–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
            QuantumSystem.addCoins(0.2);
        }
        
        function generateQuantumKey() {
            QuantumSystem.generateQuantumKey();
        }
        
        function toggleMobileMenu() {
            document.getElementById('nav-panel').classList.toggle('active');
        }
        
        // =============================================
        // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø
        // =============================================
        window.onload = function() {
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã
            QuantumSystem.init();
            
            // –ù–∞–∑–Ω–∞—á–∞–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
            window.QuantumSystem = QuantumSystem;
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤–∫–ª–∞–¥–æ–∫
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    showTab(this.dataset.tab);
                });
            });
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–µ–º—ã
            document.getElementById('interface-theme').addEventListener('change', function() {
                QuantumSystem.state.theme = this.value;
                QuantumSystem.applyTheme();
            });
        };
    </script>
</body>
</html>